"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[457],{3140:(j,f,c)=>{c.d(f,{B:()=>E});var v=c(8728),C=c(9330),a=c(8810),t=c(9437),p=c(2525);let E=(()=>{class g{constructor(){this.http=(0,v.WQX)(C.Qq),this.BASE_URL=p.c.backendUrl,this.BASE_API=p.c.api,this.SEE_GROUPS_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/seeGroups`,this.CONFIRMED_COUNT_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/confirmedCount`,this.DUPLICATES_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/duplicates`,this.GLOBALCOUNT_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/countGlobal`,this.GLOBALCOUNT_TEAMCOUNT=`${this.BASE_URL}${this.BASE_API}/storage/teamCount`,this.GLOBALCOUNT_AREACOUNT=`${this.BASE_URL}${this.BASE_API}/storage/areaCount`,this.GLOBALCOUNT_VIEWINVENTORIES=`${this.BASE_URL}${this.BASE_API}/storage/viewInventories`,this.GLOBALCOUNT_TEAMITEMS=`${this.BASE_URL}${this.BASE_API}/storage/TeamItems`,this.GLOBALCOUNT_NOTCOMPLIANT=`${this.BASE_URL}${this.BASE_API}/storage/notCompliant`,this.GLOBALCOUNT_AUDITNOTE=`${this.BASE_URL}${this.BASE_API}/storage/auditNote`,this.GLOBALCOUNT_STORAGE=`${this.BASE_URL}${this.BASE_API}/storage`,this.GLOBALCOUNT_INSERTINVENTORY=`${this.BASE_URL}${this.BASE_API}/storage/insertInventory`}handleError(h){console.error("DashInventoryServices: Error en la petici\xf3n:",h);let l="Ocurri\xf3 un error desconocido en el servicio.";return h.error&&h.er?.msg?l=h.error.msg:h.message&&(l=h.message),(0,a.$)(()=>new Error(`Fall\xf3 la consulta al backend: ${l}`))}getStorageGroups(h){return this.http.post(this.SEE_GROUPS_ENDPOINT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getConfirmedCount(h){return this.http.post(this.CONFIRMED_COUNT_ENDPOINT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getDuplicates(h){return this.http.post(this.DUPLICATES_ENDPOINT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getCountGlobal(h){return this.http.post(this.GLOBALCOUNT_ENDPOINT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getTeamCount(h){return this.http.post(this.GLOBALCOUNT_TEAMCOUNT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getAreaCount(h){return this.http.post(this.GLOBALCOUNT_AREACOUNT,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getViewInventories(h){return this.http.post(this.GLOBALCOUNT_VIEWINVENTORIES,{date:h}).pipe((0,t.W)(this.handleError.bind(this)))}getTeamItems(h,l){const I={date:h,...l};return this.http.post(this.GLOBALCOUNT_TEAMITEMS,I).pipe((0,t.W)(this.handleError.bind(this)))}getNotCompliant(h,l){const I={date:h,...l};return this.http.post(this.GLOBALCOUNT_NOTCOMPLIANT,I).pipe((0,t.W)(this.handleError.bind(this)))}getAuditNote(h){return this.http.post(this.GLOBALCOUNT_AUDITNOTE,h).pipe((0,t.W)(this.handleError.bind(this)))}getStorage(h){return this.http.post(this.GLOBALCOUNT_STORAGE,h).pipe((0,t.W)(this.handleError.bind(this)))}getInsertInventory(h){return this.http.post(this.GLOBALCOUNT_INSERTINVENTORY,h).pipe((0,t.W)(this.handleError.bind(this)))}static{this.\u0275fac=function(l){return new(l||g)}}static{this.\u0275prov=v.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},5457:(j,f,c)=>{c.r(f),c.d(f,{WarehouseModule:()=>h});var v=c(2200),C=c(8132),a=c(8101),t=c(3664),p=c(8728);const E=[{path:"",component:a.DashInventories,children:[{path:"dash",loadComponent:()=>Promise.resolve().then(c.bind(c,8101)).then(l=>l.DashInventories)}]},{path:"checkNews",loadComponent:()=>c.e(899).then(c.bind(c,1899)).then(l=>l.CheckNews)},{path:"configInventories",loadComponent:()=>c.e(109).then(c.bind(c,4109)).then(l=>l.ConfigureInventories)},{path:"enterInventory",loadComponent:()=>c.e(7).then(c.bind(c,4007)).then(l=>l.InventoryReader)}];let g=(()=>{class l{static{this.\u0275fac=function(b){return new(b||l)}}static{this.\u0275mod=t.$C({type:l})}static{this.\u0275inj=p.G2t({imports:[C.iI.forChild(E),C.iI]})}}return l})();var F=c(8652);let h=(()=>{class l{static{this.\u0275fac=function(b){return new(b||l)}}static{this.\u0275mod=t.$C({type:l})}static{this.\u0275inj=p.G2t({imports:[v.MD,F.oi,g]})}}return l})()},8101:(j,f,c)=>{c.r(f),c.d(f,{DashInventories:()=>J});var v=c(177),C=c(4799),a=c(8728),t=c(3664),p=c(4341),E=c(3140),g=c(2389),F=c(2200);function h(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function l(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.JRh(e.label)}}function I(s,m){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td",60)(12,"button",63),t.bIt("click",function(){const n=a.eBV(e).$implicit,i=t.XpG(2);return a.Njj(i.openAnnotationModal(n))}),t.nrm(13,"i",64),t.k0s()()()}if(2&s){const e=m.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.codRef),t.R7$(2),t.JRh(e.referencia),t.R7$(2),t.JRh(e.area),t.R7$(2),t.JRh(e.teamLabel||o.computeTeamKey(e))}}function T(s,m){1&s&&(t.j41(0,"tr")(1,"td",65),t.EFF(2,"No hay registros para la fecha seleccionada"),t.k0s()())}function b(s,m){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"div",48)(2,"div",49)(3,"input",50),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterText,n)||(i.filterText=n),a.Njj(n)}),t.bIt("ngModelChange",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyGlobalFilters())}),t.k0s()(),t.j41(4,"div",49)(5,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterArea,n)||(i.filterArea=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyGlobalFilters())}),t.j41(6,"option",52),t.EFF(7,"Todas las \xc1reas"),t.k0s(),t.DNE(8,h,2,2,"option",53),t.k0s()(),t.j41(9,"div",49)(10,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterTeam,n)||(i.filterTeam=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyGlobalFilters())}),t.j41(11,"option",52),t.EFF(12,"Todos los Equipos"),t.k0s(),t.DNE(13,l,2,2,"option",53),t.k0s()(),t.j41(14,"div",54)(15,"button",55),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.resetGlobalFilters())}),t.EFF(16,"Reset"),t.k0s(),t.j41(17,"button",56),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.loadAllData(n.formatDateForBackend(n.selectedDate)))}),t.EFF(18,"Refrescar"),t.k0s()()(),t.j41(19,"div",57)(20,"table",58)(21,"thead",59)(22,"tr")(23,"th"),t.EFF(24,"C\xf3digo"),t.k0s(),t.j41(25,"th"),t.EFF(26,"CodRef"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Referencia"),t.k0s(),t.j41(29,"th"),t.EFF(30,"\xc1rea"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Equipo"),t.k0s(),t.j41(33,"th",60),t.EFF(34,"Anotaciones"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,I,14,5,"tr",61)(37,T,3,0,"tr",46),t.k0s()()()()}if(2&s){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.filterText),t.R7$(2),t.R50("ngModel",e.filterArea),t.R7$(3),t.Y8G("ngForOf",e.areaOptions),t.R7$(2),t.R50("ngModel",e.filterTeam),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(23),t.Y8G("ngForOf",e.filteredInventory),t.R7$(),t.Y8G("ngIf",0===e.filteredInventory.length)}}function k(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.Lme("",e.label," \u2014 ",e.area)}}function N(s,m){if(1&s&&(t.j41(0,"li",80),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.R7$(),t.JRh(e)}}function A(s,m){if(1&s&&(t.j41(0,"div")(1,"h6",5),t.EFF(2),t.k0s(),t.j41(3,"p",76),t.EFF(4,"Registros: "),t.j41(5,"strong"),t.EFF(6),t.k0s()(),t.j41(7,"div",77)(8,"ul",78),t.DNE(9,N,2,1,"li",79),t.k0s()()()),2&s){const e=t.XpG(2);t.R7$(2),t.JRh(e.teamLeft.area||"\u2014"),t.R7$(4),t.JRh(e.teamLeft.total||0),t.R7$(3),t.Y8G("ngForOf",e.teamLeft.codes)}}function O(s,m){1&s&&(t.j41(0,"div",81),t.EFF(1,"Elige un equipo para ver c\xf3digos"),t.k0s())}function y(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.Lme("",e.label," \u2014 ",e.area)}}function x(s,m){if(1&s&&(t.j41(0,"li",80),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.R7$(),t.JRh(e)}}function L(s,m){if(1&s&&(t.j41(0,"div")(1,"h6",5),t.EFF(2),t.k0s(),t.j41(3,"p",76),t.EFF(4,"Registros: "),t.j41(5,"strong"),t.EFF(6),t.k0s()(),t.j41(7,"div",77)(8,"ul",78),t.DNE(9,x,2,1,"li",79),t.k0s()()()),2&s){const e=t.XpG(2);t.R7$(2),t.JRh(e.teamRight.area||"\u2014"),t.R7$(4),t.JRh(e.teamRight.total||0),t.R7$(3),t.Y8G("ngForOf",e.teamRight.codes)}}function M(s,m){1&s&&(t.j41(0,"div",81),t.EFF(1,"Elige un equipo para ver c\xf3digos"),t.k0s())}function G(s,m){if(1&s&&(t.j41(0,"div",82)(1,"small",81),t.EFF(2),t.k0s()()),2&s){const e=t.XpG(2);t.R7$(2),t.Lme("Coincidencias: ",e.comparisonResult.matchCount,", Diferencias: ",e.comparisonResult.diffCount)}}function B(s,m){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"div",66)(2,"div",67)(3,"div",68)(4,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.selectedTeamLeft,n)||(i.selectedTeamLeft=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.onSelectTeam("left"))}),t.j41(5,"option",52),t.EFF(6,"Selecciona equipo (Izq)"),t.k0s(),t.DNE(7,k,2,3,"option",53),t.k0s(),t.j41(8,"button",69),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.clearTeam("left"))}),t.EFF(9,"Limpiar"),t.k0s()(),t.j41(10,"div",70)(11,"div",3),t.DNE(12,A,10,3,"div",46)(13,O,2,0,"div",71),t.k0s()()(),t.j41(14,"div",67)(15,"div",68)(16,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.selectedTeamRight,n)||(i.selectedTeamRight=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.onSelectTeam("right"))}),t.j41(17,"option",52),t.EFF(18,"Selecciona equipo (Der)"),t.k0s(),t.DNE(19,y,2,3,"option",53),t.k0s(),t.j41(20,"button",69),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.clearTeam("right"))}),t.EFF(21,"Limpiar"),t.k0s()(),t.j41(22,"div",70)(23,"div",3),t.DNE(24,L,10,3,"div",46)(25,M,2,0,"div",71),t.k0s()()()(),t.j41(26,"div",72)(27,"button",73),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.compareTeams())}),t.EFF(28,"Comparar equipos"),t.k0s(),t.j41(29,"button",74),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.exportComparison())}),t.EFF(30,"Exportar (CSV)"),t.k0s(),t.DNE(31,G,3,2,"div",75),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(4),t.R50("ngModel",e.selectedTeamLeft),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(5),t.Y8G("ngIf",e.teamLeft),t.R7$(),t.Y8G("ngIf",!e.teamLeft),t.R7$(3),t.R50("ngModel",e.selectedTeamRight),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(5),t.Y8G("ngIf",e.teamRight),t.R7$(),t.Y8G("ngIf",!e.teamRight),t.R7$(6),t.Y8G("ngIf",e.comparisonResult)}}function $(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function P(s,m){if(1&s&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&s){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.JRh(e.label)}}function S(s,m){1&s&&(t.j41(0,"span"),t.EFF(1,", "),t.k0s())}function U(s,m){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.DNE(2,S,2,0,"span",46),t.k0s()),2&s){const e=m.$implicit,o=m.last;t.R7$(),t.SpI(" ",e),t.R7$(),t.Y8G("ngIf",!o)}}function w(s,m){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.DNE(14,U,3,2,"span",61),t.k0s(),t.j41(15,"td",60)(16,"button",63),t.bIt("click",function(){const n=a.eBV(e).$implicit,i=t.XpG(2);return a.Njj(i.openAnnotationModal(n))}),t.nrm(17,"i",64),t.k0s()()()}if(2&s){const e=m.$implicit;t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.codRef),t.R7$(2),t.JRh(e.referencia),t.R7$(2),t.JRh(e.producto),t.R7$(2),t.JRh(e.area),t.R7$(2),t.JRh(e.team||"Sin equipo"),t.R7$(2),t.Y8G("ngForOf",e.persons)}}function V(s,m){1&s&&(t.j41(0,"tr")(1,"td",85),t.EFF(2,"No hay registros no conformes para la fecha seleccionada"),t.k0s()())}function X(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",86)(1,"button",87),t.bIt("click",function(){a.eBV(e);const n=t.XpG(2);return a.Njj(n.changeNotCompliantPage(n.notCompliantCurrentPage-1))}),t.EFF(2," Anterior "),t.k0s(),t.j41(3,"button",88),t.EFF(4),t.k0s(),t.j41(5,"button",87),t.bIt("click",function(){a.eBV(e);const n=t.XpG(2);return a.Njj(n.changeNotCompliantPage(n.notCompliantCurrentPage+1))}),t.EFF(6," Siguiente "),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.notCompliantCurrentPage<=1),t.R7$(3),t.Lme(" P\xe1gina ",e.notCompliantCurrentPage," de ",e.notCompliantTotalPages," "),t.R7$(),t.Y8G("disabled",e.notCompliantCurrentPage>=e.notCompliantTotalPages)}}function Y(s,m){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"div",48)(2,"div",49)(3,"input",50),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterTextNotCompliant,n)||(i.filterTextNotCompliant=n),a.Njj(n)}),t.bIt("ngModelChange",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyNotCompliantFilters())}),t.k0s()(),t.j41(4,"div",49)(5,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterAreaNotCompliant,n)||(i.filterAreaNotCompliant=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyNotCompliantFilters())}),t.j41(6,"option",52),t.EFF(7,"Todas las \xc1reas"),t.k0s(),t.DNE(8,$,2,2,"option",53),t.k0s()(),t.j41(9,"div",49)(10,"select",51),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.filterTeamNotCompliant,n)||(i.filterTeamNotCompliant=n),a.Njj(n)}),t.bIt("change",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.applyNotCompliantFilters())}),t.j41(11,"option",52),t.EFF(12,"Todos los Equipos"),t.k0s(),t.DNE(13,P,2,2,"option",53),t.k0s()(),t.j41(14,"div",54)(15,"button",55),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.resetNotCompliantFilters())}),t.EFF(16,"Reset"),t.k0s(),t.j41(17,"button",56),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.loadNotCompliantData(n.formatDateForBackend(n.selectedDate)))}),t.EFF(18,"Refrescar"),t.k0s()()(),t.j41(19,"div",57)(20,"table",58)(21,"thead",59)(22,"tr")(23,"th"),t.EFF(24,"C\xf3digo"),t.k0s(),t.j41(25,"th"),t.EFF(26,"CodRef"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Referencia"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Producto"),t.k0s(),t.j41(31,"th"),t.EFF(32,"\xc1rea"),t.k0s(),t.j41(33,"th"),t.EFF(34,"Equipo"),t.k0s(),t.j41(35,"th"),t.EFF(36,"Personas"),t.k0s(),t.j41(37,"th",60),t.EFF(38,"Anotaciones"),t.k0s()()(),t.j41(39,"tbody"),t.DNE(40,w,18,7,"tr",61)(41,V,3,0,"tr",46),t.k0s()()(),t.j41(42,"div",83)(43,"div",81),t.EFF(44),t.k0s(),t.DNE(45,X,7,4,"div",84),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.filterTextNotCompliant),t.R7$(2),t.R50("ngModel",e.filterAreaNotCompliant),t.R7$(3),t.Y8G("ngForOf",e.areaOptions),t.R7$(2),t.R50("ngModel",e.filterTeamNotCompliant),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(27),t.Y8G("ngForOf",e.filteredNotCompliantItems),t.R7$(),t.Y8G("ngIf",0===e.filteredNotCompliantItems.length),t.R7$(3),t.Lme(" Mostrando ",e.filteredNotCompliantItems.length," de ",e.notCompliantTotal," registros no conformes "),t.R7$(),t.Y8G("ngIf",e.notCompliantTotalPages>1)}}function W(s,m){if(1&s){const e=t.RV6();t.j41(0,"div",89)(1,"div",90)(2,"div",41)(3,"div",91)(4,"strong"),t.EFF(5,"Anotaci\xf3n - C\xf3digo:"),t.k0s(),t.j41(6,"small",92),t.EFF(7),t.k0s(),t.j41(8,"button",93),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.closeAnnotationModal())}),t.k0s()(),t.j41(9,"div",3)(10,"p",94)(11,"small",81),t.EFF(12),t.k0s()(),t.j41(13,"div",95)(14,"label",96),t.EFF(15,"Anotaci\xf3n"),t.k0s(),t.j41(16,"textarea",97),t.mxI("ngModelChange",function(n){a.eBV(e);const i=t.XpG();return t.DH7(i.annotationText,n)||(i.annotationText=n),a.Njj(n)}),t.k0s()(),t.j41(17,"div",98)(18,"button",74),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.closeAnnotationModal())}),t.EFF(19,"Cancelar"),t.k0s(),t.j41(20,"button",73),t.bIt("click",function(){a.eBV(e);const n=t.XpG();return a.Njj(n.saveAnnotation())}),t.EFF(21,"Guardar"),t.k0s()()()()()()}if(2&s){const e=t.XpG();t.R7$(7),t.JRh(null==e.annotationItem?null:e.annotationItem.code),t.R7$(5),t.Lme("Referencia: ",null==e.annotationItem?null:e.annotationItem.referencia," \u2014 \xc1rea: ",null==e.annotationItem?null:e.annotationItem.area),t.R7$(4),t.R50("ngModel",e.annotationText)}}(0,v.EO)(C.A,"es");let J=(()=>{class s{constructor(){this.dashboardService=(0,a.WQX)(E.B),this.selectedDate=this.formatDate(new Date),this.storageGroupsData=[],this.confirmedCountData=[],this.duplicatesData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0,this.duplicadosCount=0,this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0,this.configuracionesCount=0,this.bloqueosCount=0,this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0,this.teamCount=0,this.areaCount=0,this.notCompliantTotal=0,this.notCompliantTotalPages=0,this.notCompliantCurrentPage=1,this.notCompliantPageSize=20,this.notCompliantItems=[],this.notCompliantLoading=!1,this.notCompliantError="",this.filteredNotCompliantItems=[],this.filterTextNotCompliant="",this.filterAreaNotCompliant="",this.filterTeamNotCompliant="",this.showAnnotationModal=!1,this.annotationItem=null,this.annotationText="",this.panel="global",this.globalSearch="",this.filterText="",this.filterArea="",this.filterTeam="",this.areaOptions=[],this.teamOptions=[],this.loading=!1,this.errorMessage="",this.inventoryList=[],this.filteredInventory=[],this.p=1,this.itemsPerPage=10,this.selectedTeamLeft="",this.selectedTeamRight="",this.teamLeft=null,this.teamRight=null,this.comparisonResult=null,this.loadAllData(this.formatDateForBackend(this.selectedDate))}formatDate(e){const o=new Date(e);let n=""+(o.getMonth()+1),i=""+o.getDate();const r=o.getFullYear();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),[r,n,i].join("-")}formatDateForBackend(e){const o="string"==typeof e?new Date(e.replace(/-/g,"/")):e;let n=""+o.getDate(),i=""+(o.getMonth()+1);const r=o.getFullYear();return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),[n,i,r].join("/")}onDateChange(e){const o=this.formatDateForBackend(e);this.loadAllData(o)}loadAllData(e){this.loading=!0,this.errorMessage="",this.resetCounts(),this.dashboardService.getViewInventories(e).subscribe({next:o=>{if(o?.ok&&o.msg){this.inventoryList=o.msg.items.map(i=>{const r=Array.isArray(i.persons)?i.persons.filter(Boolean):[],d=`${i.area||""}||${r.join("|")}`;return{...i,teamKey:d,teamLabel:r.length?r.join(", "):i.team||i.area||""}}),this.filteredInventory=[...this.inventoryList],this.areaOptions=Array.from(new Set(this.inventoryList.map(i=>i.area).filter(Boolean))).sort();const n=new Map;this.inventoryList.forEach(i=>{const r=Array.isArray(i.persons)?i.persons.filter(Boolean):[],d=`${i.area||""}||${r.join("|")}`;if(!n.has(d)){const u=r.length?`${r.join(", ")}`:i.team||i.area||"Equipo";n.set(d,{label:u,area:i.area})}}),this.teamOptions=Array.from(n.entries()).map(([i,r])=>({key:i,label:r.label,area:r.area}))}else this.inventoryList=[],this.filteredInventory=[],this.areaOptions=[],this.teamOptions=[]},error:o=>{console.error("Error viewInventories:",o),this.errorMessage=o?.message||"Error cargando inventarios",this.inventoryList=[],this.filteredInventory=[],this.areaOptions=[],this.teamOptions=[]}}),this.dashboardService.getStorageGroups(e).subscribe({next:o=>{o&&o.ok&&o.msg?(this.storageGroupsData=Array.isArray(o.msg.data)?o.msg.data:[],this.productosLeidosCount=Number(o.msg.totalRecords??this.storageGroupsData.length??0),this.equiposRegistradosCount=Number(o.msg.totalGroups??0)):(this.storageGroupsData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0)},error:o=>{console.error("Error getStorageGroups:",o),this.errorMessage=o?.message||"Error cargando grupos de almacenamiento",this.storageGroupsData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0}}),this.dashboardService.getConfirmedCount(e).subscribe({next:o=>{o&&o.ok&&Array.isArray(o.msg)?(this.confirmedCountData=o.msg,this.productosOkCount=this.confirmedCountData.reduce((n,i)=>n+(Number(i.validatedTrue??0)||0),0),this.noConformesCount=this.confirmedCountData.reduce((n,i)=>n+(Number(i.validatedFalse??0)||0),0),this.revisionesCount=this.confirmedCountData.length):(this.confirmedCountData=[],this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0)},error:o=>{console.error("Error getConfirmedCount:",o),this.errorMessage=o?.message||"Error cargando conteo confirmado",this.confirmedCountData=[],this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0}}),this.dashboardService.getDuplicates(e).subscribe({next:o=>{o&&o.ok&&o.msg&&Array.isArray(o.msg.data)?(this.duplicatesData=o.msg.data,this.duplicadosCount=this.duplicatesData.length):(this.duplicatesData=[],this.duplicadosCount=0)},error:o=>{console.error("Error getDuplicates:",o),this.errorMessage=o?.message||"Error cargando duplicados",this.duplicatesData=[],this.duplicadosCount=0}}),this.dashboardService.getCountGlobal(e).subscribe({next:o=>{o&&o.ok&&o.msg?(this.globalCount=Number(o.msg.total??0),this.validatedTrueCount=Number(o.msg.validatedTrue??0),this.validatedFalseCount=Number(o.msg.validatedFalse??0)):(this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0)},error:o=>{console.error("Error getCountGlobal:",o),this.errorMessage=o?.message||"Error cargando conteo global",this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0}}),this.dashboardService.getTeamCount(e).subscribe({next:o=>{this.teamCount=o&&o.ok&&o.msg?Number(o.msg.totalTeams??0):0},error:o=>{console.error("Error getTeamCount:",o),this.errorMessage=o?.message||"Error cargando conteo de equipos",this.teamCount=0}}),this.dashboardService.getAreaCount(e).subscribe({next:o=>{this.areaCount=o&&o.ok&&o.msg?Number(o.msg.totalAreas??0):0},error:o=>{console.error("Error getAreaCount:",o),this.errorMessage=o?.message||"Error cargando conteo de \xe1reas",this.areaCount=0}}),this.dashboardService.getNotCompliant(e,{teamKey:"all"}).subscribe({next:o=>{if(o&&o.ok&&o.msg){this.notCompliantTotal=o.msg.total??0,this.notCompliantTotalPages=o.msg.totalPages??0,this.notCompliantCurrentPage=o.msg.currentPage??1,this.notCompliantItems=Array.isArray(o.msg.items)?o.msg.items:[],this.applyNotCompliantFilters();const n=this.notCompliantItems.map(i=>i.area).filter(Boolean);this.areaOptions=Array.from(new Set([...this.areaOptions,...n])).sort(),this.filteredNotCompliantItems=[...this.filteredNotCompliantItems]}else this.resetNotCompliantData()},error:o=>{console.error("Error getNotCompliant:",o),this.errorMessage=o?.message||"Error cargando items no conformes",this.resetNotCompliantData()}}),setTimeout(()=>this.loading=!1,400)}applyGlobalFilters(){const e=(this.filterText||"").toLowerCase();this.filteredInventory=this.inventoryList.filter(o=>{const n=!e||String(o.code||"").toLowerCase().includes(e)||String(o.referencia||"").toLowerCase().includes(e)||String(o.producto||"").toLowerCase().includes(e)||String(o.codRef||"").toLowerCase().includes(e),i=!this.filterArea||o.area===this.filterArea,r=!this.filterTeam||this.computeTeamKey(o)===this.filterTeam;return n&&i&&r})}onGlobalFilterChange(){this.applyGlobalFilters()}resetGlobalFilters(){this.filterText="",this.filterArea="",this.filterTeam="",this.filteredInventory=[...this.inventoryList]}computeTeamKey(e){const o=Array.isArray(e.persons)?e.persons.filter(Boolean):[];return`${e.area||""}||${o.join("|")}`}onSelectTeam(e){const o="left"===e?this.selectedTeamLeft:this.selectedTeamRight;if(!o)return void("left"===e?this.teamLeft=null:this.teamRight=null);const n=this.formatDateForBackend(this.selectedDate);this.dashboardService.getTeamItems(n,{teamKey:o}).subscribe({next:i=>{if(i?.ok&&i.msg){const r=i.msg;"left"===e?this.teamLeft={area:r.area,total:r.total,codes:r.codes.map(d=>d.code)}:this.teamRight={area:r.area,total:r.total,codes:r.codes.map(d=>d.code)}}else"left"===e?this.teamLeft=null:this.teamRight=null},error:i=>{console.error("Error getTeamItems:",i),"left"===e?this.teamLeft=null:this.teamRight=null}})}clearTeam(e){"left"===e?(this.selectedTeamLeft="",this.teamLeft=null):(this.selectedTeamRight="",this.teamRight=null),this.comparisonResult=null}compareTeams(){if(!this.teamLeft||!this.teamRight)return void(this.comparisonResult=null);const e=new Set(this.teamLeft.codes),o=new Set(this.teamRight.codes);let n=0;e.forEach(d=>{o.has(d)&&n++});const r=new Set([...e,...o]).size-n;this.comparisonResult={matchCount:n,diffCount:r}}exportComparison(){if(!this.teamLeft||!this.teamRight)return;const e=this.teamLeft.codes.reduce((_,R)=>(_[R]=(_[R]||0)+1,_),{}),o=this.teamRight.codes.reduce((_,R)=>(_[R]=(_[R]||0)+1,_),{}),r=["code,leftCount,rightCount",...Array.from(new Set([...Object.keys(e),...Object.keys(o)])).map(_=>`${_},${e[_]||0},${o[_]||0}`)].join("\n"),d=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(d),D=document.createElement("a");D.href=u,D.download=`comparison_${Date.now()}.csv`,D.click(),URL.revokeObjectURL(u)}resetCounts(){this.productosLeidosCount=0,this.equiposRegistradosCount=0,this.duplicadosCount=0,this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0,this.globalCount=0,this.teamCount=0,this.areaCount=0}openAnnotationModal(e){this.annotationItem=e,this.annotationText=e?.annotation??e?.note??"",this.showAnnotationModal=!0}closeAnnotationModal(){this.showAnnotationModal=!1,this.annotationItem=null,this.annotationText=""}saveAnnotation(){if(!this.annotationItem)return;const e=(this.annotationText||"").trim();e!==(this.annotationItem.annotation??this.annotationItem.note??"")?this.sendAuditNoteForItem({code:this.annotationItem.code,referencia:this.annotationItem.referencia,area:this.annotationItem.area},e):this.closeAnnotationModal()}isSimpleResponse(e){return!!e&&"string"==typeof e.msg}isWithItemResponse(e){return!!e&&e.msg&&"object"==typeof e.msg&&("code"in e.msg||"_id"in e.msg)}sendAuditNoteForItem(e,o){const n=this.formatDateForBackend(this.selectedDate),i={barcode:e.code,reference:e.referencia,area:e.area,note:o,date:n};this.notCompliantLoading=!0,this.dashboardService.getAuditNote(i).subscribe({next:r=>{if(!r||!r.ok)return console.warn("Respuesta no OK del backend:",r),void(this.notCompliantLoading=!1);const d=this.notCompliantItems.find(u=>String(u.code)===String(i.barcode));if(this.isSimpleResponse(r))d&&(d.annotation=i.note??d.annotation),console.log(r.msg);else if(this.isWithItemResponse(r)){const u=r.msg;d?(d.annotation=u.annotation??u.note??i.note??d.annotation,d.area=u.area??d.area,d.referencia=u.referencia??d.referencia,d.producto=u.producto??d.producto,d.validate="boolean"==typeof u.validate?u.validate:d.validate,d.codRef="number"==typeof u.codRef?u.codRef:d.codRef,d.persons=Array.isArray(u.persons)?u.persons:d.persons,d.team=u.team??d.team):this.notCompliantItems.push({_id:u._id,area:u.area,persons:u.persons||[],team:u.team||"",code:u.code,codRef:u.codRef,referencia:u.referencia,producto:u.producto,validate:u.validate,annotation:u.annotation??u.note}),console.log("Item actualizado:",u)}else d&&(d.annotation=i.note??d.annotation),console.warn("Respuesta con formato inesperado:",r);this.applyNotCompliantFilters(),this.closeAnnotationModal(),this.notCompliantLoading=!1},error:r=>{console.error("Error al guardar anotaci\xf3n:",r),this.notCompliantLoading=!1}})}loadNotCompliantData(e,o=1,n=20){this.dashboardService.getNotCompliant(e,{teamKey:"all",page:o,limit:n}).subscribe({next:r=>{r&&r.ok&&r.msg?(this.notCompliantTotal=r.msg.total??0,this.notCompliantTotalPages=r.msg.totalPages??0,this.notCompliantCurrentPage=r.msg.currentPage??o,this.notCompliantItems=r.msg.items??[],this.applyNotCompliantFilters()):this.resetNotCompliantData()},error:r=>{console.error("Error getNotCompliant:",r),this.errorMessage=r?.message||"Error cargando items no conformes",this.resetNotCompliantData()}})}resetNotCompliantData(){this.notCompliantTotal=0,this.notCompliantTotalPages=0,this.notCompliantCurrentPage=1,this.notCompliantItems=[],this.filteredNotCompliantItems=[]}applyNotCompliantFilters(){const e=(this.filterTextNotCompliant||"").trim().toLowerCase();this.filteredNotCompliantItems=this.notCompliantItems.filter(o=>(!e||(o.code||"").toLowerCase().includes(e)||(o.referencia||"").toLowerCase().includes(e)||(o.producto||"").toLowerCase().includes(e))&&(!this.filterAreaNotCompliant||o.area===this.filterAreaNotCompliant)&&(!this.filterTeamNotCompliant||o.team===this.filterTeamNotCompliant))}resetNotCompliantFilters(){this.filterTextNotCompliant="",this.filterAreaNotCompliant="",this.filterTeamNotCompliant="",this.applyNotCompliantFilters()}changeNotCompliantPage(e){if(!e||e<1||this.notCompliantTotalPages&&e>this.notCompliantTotalPages)return;const o=this.formatDateForBackend(this.selectedDate);this.loadNotCompliantData(o,e,this.notCompliantPageSize)}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-dash-inventories"]],features:[t.Jv_([{provide:t.xe9,useValue:"es"}])],decls:123,vars:23,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"card","bg-primary-subtle","text-dark","overflow-hidden"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-1"],[1,"text-muted","mb-0","opacity-75","text-sm"],[1,"col-12","col-md-3"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"row","mb-4"],[1,"col-md-3","mb-3"],[1,"card","total-income-card","overflow-hidden","bg-primary","text-white"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","icon","m-r-5"],[1,"text-white","ti","ti-layout-board-split","f-24"],[1,"ms-2"],[1,"text-white","f-w-600","mb-1"],[1,"mb-0","opacity-50","text-sm"],[1,"card","total-income-card","warning","overflow-hidden"],[1,"avatar","avatar-lg","icon-warning","m-r-5"],[1,"text-warning","ti","ti-layout-board-split","f-24"],[1,"f-w-600","mb-1"],[1,"card","total-income-card","danger","overflow-hidden","bg-danger","text-white"],[1,"avatar","avatar-lg","icon-danger","m-r-5"],[1,"text-white","ti","ti-alert-circle","f-24"],[1,"card","total-income-card","success","overflow-hidden","bg-success","text-white"],[1,"avatar","avatar-lg","icon-success","m-r-5"],[1,"text-white","ti","ti-check","f-24"],[1,"card","total-income-card","info","overflow-hidden","bg-info","text-white"],[1,"avatar","avatar-lg","icon-info","m-r-5"],[1,"text-white","ti","ti-info-circle","f-24"],[1,"card","total-income-card","warning","overflow-hidden","bg-warning","text-dark"],[1,"text-dark","ti","ti-exclamation","f-24"],[1,"card","total-income-card","secondary","overflow-hidden","bg-secondary","text-white"],[1,"avatar","avatar-lg","icon-secondary","m-r-5"],[1,"text-white","ti","ti-settings","f-24"],[1,"card","total-income-card","dark","overflow-hidden","bg-dark","text-white"],[1,"avatar","avatar-lg","icon-dark","m-r-5"],[1,"text-white","ti","ti-lock","f-24"],[1,"row","mt-4"],[1,"col-12"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"list-group","list-group-horizontal","mb-0"],[1,"list-group-item",3,"click"],["type","text","placeholder","Buscar r\xe1pido (c\xf3digo, ref, producto)",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","annotation-modal-backdrop",4,"ngIf"],[1,"row","mb-3","g-2"],[1,"col-md-3"],["type","text","placeholder","Buscar c\xf3digo / referencia / producto",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","d-flex"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"value"],["title","Agregar / ver anotaci\xf3n",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"ti","ti-note"],["colspan","6",1,"text-center","text-muted"],[1,"row","mb-3"],[1,"col-md-6"],[1,"mb-2","d-flex","align-items-center","gap-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"card","h-100"],["class","text-muted",4,"ngIf"],[1,"d-flex","gap-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-outline-secondary",3,"click"],["class","ms-3",4,"ngIf"],[1,"mb-2","text-muted"],[1,"codes-list",2,"max-height","320px","overflow","auto"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"text-muted"],[1,"ms-3"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],["class","btn-group","role","group",4,"ngIf"],["colspan","8",1,"text-center","text-muted"],["role","group",1,"btn-group"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-primary","btn-sm","disabled"],[1,"annotation-modal-backdrop"],[1,"annotation-modal","dialog-card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"text-muted","ms-2"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"mb-2"],[1,"mb-3"],[1,"form-label"],["rows","6","placeholder","Escribe tu nota aqu\xed...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h4",5),t.EFF(7,"Consultar Inventario \u{1f4e6} por Fecha \u{1f4c5}"),t.k0s(),t.j41(8,"p",6),t.EFF(9," Fecha Seleccionada: "),t.j41(10,"strong"),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"div",7)(14,"input",8),t.mxI("ngModelChange",function(r){return t.DH7(n.selectedDate,r)||(n.selectedDate=r),r}),t.bIt("change",function(){return n.onDateChange(n.selectedDate)}),t.k0s()()()()()()(),t.j41(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",3)(19,"div",12)(20,"div",13),t.nrm(21,"i",14),t.k0s(),t.j41(22,"div",15)(23,"h4",16),t.EFF(24),t.k0s(),t.j41(25,"p",17),t.EFF(26,"Total Productos Leidos"),t.k0s()()()()()(),t.j41(27,"div",10)(28,"div",18)(29,"div",3)(30,"div",12)(31,"div",19),t.nrm(32,"i",20),t.k0s(),t.j41(33,"div",15)(34,"h4",21),t.EFF(35),t.k0s(),t.j41(36,"p",17),t.EFF(37,"Productos Conformes"),t.k0s()()()()()(),t.j41(38,"div",10)(39,"div",22)(40,"div",3)(41,"div",12)(42,"div",23),t.nrm(43,"i",24),t.k0s(),t.j41(44,"div",15)(45,"h4",16),t.EFF(46),t.k0s(),t.j41(47,"p",17),t.EFF(48,"Productos No Conformes"),t.k0s()()()()()(),t.j41(49,"div",10)(50,"div",25)(51,"div",3)(52,"div",12)(53,"div",26),t.nrm(54,"i",27),t.k0s(),t.j41(55,"div",15)(56,"h4",16),t.EFF(57),t.k0s(),t.j41(58,"p",17),t.EFF(59,"Equipos Registrados"),t.k0s()()()()()()(),t.j41(60,"div",0)(61,"div",10)(62,"div",28)(63,"div",3)(64,"div",12)(65,"div",29),t.nrm(66,"i",30),t.k0s(),t.j41(67,"div",15)(68,"h4",16),t.EFF(69),t.k0s(),t.j41(70,"p",17),t.EFF(71,"\xc1reas Registradas"),t.k0s()()()()()(),t.j41(72,"div",10)(73,"div",31)(74,"div",3)(75,"div",12)(76,"div",19),t.nrm(77,"i",32),t.k0s(),t.j41(78,"div",15)(79,"h4",21),t.EFF(80,"0"),t.k0s(),t.j41(81,"p",17),t.EFF(82,"Revisiones Auditoria"),t.k0s()()()()()(),t.j41(83,"div",10)(84,"div",33)(85,"div",3)(86,"div",12)(87,"div",34),t.nrm(88,"i",35),t.k0s(),t.j41(89,"div",15)(90,"h4",16),t.EFF(91,"0"),t.k0s(),t.j41(92,"p",17),t.EFF(93,"Registros de Novedades"),t.k0s()()()()()(),t.j41(94,"div",10)(95,"div",36)(96,"div",3)(97,"div",12)(98,"div",37),t.nrm(99,"i",38),t.k0s(),t.j41(100,"div",15)(101,"h4",16),t.EFF(102,"0"),t.k0s(),t.j41(103,"p",17),t.EFF(104,"??"),t.k0s()()()()()()(),t.j41(105,"div",39)(106,"div",40)(107,"div",41)(108,"div",42)(109,"ul",43)(110,"li",44),t.bIt("click",function(){return n.panel="global"}),t.EFF(111,"Inventario Global"),t.k0s(),t.j41(112,"li",44),t.bIt("click",function(){return n.panel="teams"}),t.EFF(113,"Inventario por Equipos"),t.k0s(),t.j41(114,"li",44),t.bIt("click",function(){return n.panel="notCompliant"}),t.EFF(115,"Inventario No Conformes"),t.k0s()(),t.j41(116,"div",12)(117,"input",45),t.mxI("ngModelChange",function(r){return t.DH7(n.globalSearch,r)||(n.globalSearch=r),r}),t.bIt("ngModelChange",function(){return n.onGlobalFilterChange()}),t.k0s()()(),t.j41(118,"div",3),t.DNE(119,b,38,7,"div",46)(120,B,32,9,"div",46)(121,Y,46,10,"div",46),t.k0s()()()(),t.DNE(122,W,22,4,"div",47)),2&o&&(t.R7$(11),t.JRh(t.ii3(12,18,n.selectedDate,"fullDate","","es")),t.R7$(3),t.R50("ngModel",n.selectedDate),t.R7$(10),t.JRh(n.globalCount||"0"),t.R7$(11),t.JRh(n.validatedTrueCount||"0"),t.R7$(11),t.JRh(n.validatedFalseCount||"0"),t.R7$(11),t.JRh(n.teamCount||"0"),t.R7$(12),t.JRh(n.areaCount||"0"),t.R7$(41),t.AVh("active","global"===n.panel),t.R7$(2),t.AVh("active","teams"===n.panel),t.R7$(2),t.AVh("active","notCompliant"===n.panel),t.R7$(3),t.R50("ngModel",n.globalSearch),t.R7$(2),t.Y8G("ngIf","global"===n.panel),t.R7$(),t.Y8G("ngIf","teams"===n.panel),t.R7$(),t.Y8G("ngIf","notCompliant"===n.panel),t.R7$(),t.Y8G("ngIf",n.showAnnotationModal))},dependencies:[g.G,F.Sq,F.bT,p.xH,p.y7,p.me,p.wz,p.BC,p.vS,F.vh,p.YN],styles:[".annotation-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:2000}.annotation-modal.dialog-card[_ngcontent-%COMP%]{width:90%;max-width:720px;padding:0 12px}.annotation-modal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:6px;overflow:hidden}.annotation-modal[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between}"]})}}return s})()}}]);