"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[7],{4007:(k,p,g)=>{g.r(p),g.d(p,{InventoryReader:()=>R});var a=g(8728),u=g(2200),l=g(4341),m=g(980),f=g(3140),e=g(3664);function _(r,c){if(1&r&&(e.j41(0,"div",29),e.EFF(1),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.SpI(" ",n.statusMessage," ")}}function h(r,c){if(1&r&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&r){const n=c.$implicit;e.R7$(),e.JRh(n)}}function b(r,c){if(1&r&&(e.j41(0,"ul",30),e.DNE(1,h,2,1,"li",31),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.scannedCodes)}}function M(r,c){if(1&r&&(e.j41(0,"div")(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"ID:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Descripci\xf3n:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Precio:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Stock:"),e.k0s(),e.EFF(18),e.k0s()()),2&r){const n=e.XpG(2);e.R7$(2),e.JRh(n.currentProduct.name),e.R7$(4),e.SpI(" ",n.currentProduct.id),e.R7$(4),e.SpI(" ",n.currentProduct.description),e.R7$(4),e.SpI(" $",n.currentProduct.price.toFixed(2)),e.R7$(4),e.SpI(" ",n.currentProduct.stock," unidades")}}function I(r,c){1&r&&(e.j41(0,"p",34),e.EFF(1,"Escanee un c\xf3digo de barras para ver la informaci\xf3n del producto"),e.k0s())}function F(r,c){if(1&r&&(e.j41(0,"div",32),e.DNE(1,M,19,5,"div",33)(2,I,2,0,"ng-template",null,1,e.C5r),e.k0s()),2&r){const n=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.currentProduct)("ngIfElse",n)}}function v(r,c){if(1&r&&(e.j41(0,"div",39)(1,"h4"),e.EFF(2),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"ID:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Precio:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Stock:"),e.k0s(),e.EFF(14),e.k0s()()),2&r){const n=c.$implicit;e.R7$(2),e.JRh(n.name),e.R7$(4),e.SpI(" ",n.id),e.R7$(4),e.SpI(" $",n.price.toFixed(2)),e.R7$(4),e.SpI(" ",n.stock," unidades")}}function P(r,c){if(1&r&&(e.j41(0,"div",37),e.DNE(1,v,15,4,"div",38),e.k0s()),2&r){const n=e.XpG(2);e.R7$(),e.Y8G("ngForOf",n.regletaProducts)}}function y(r,c){1&r&&(e.j41(0,"p",34),e.EFF(1,"Escanee c\xf3digos de barras para crear una regleta de productos"),e.k0s())}function C(r,c){if(1&r&&(e.j41(0,"div",35),e.DNE(1,P,2,1,"div",36)(2,y,2,0,"ng-template",null,2,e.C5r),e.k0s()),2&r){const n=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.regletaProducts.length>0)("ngIfElse",n)}}let R=(()=>{class r{constructor(){this.dashService=(0,a.WQX)(f.B),this.readingMode="simple",this.barcodeInput="",this.scannedCodes=[],this.currentProduct=null,this.regletaProducts=[],this.statusMessage="",this.inventoryArea="",this.personName1="",this.personName2="",this.loading=!1}ngOnInit(){console.log("Inventory Reader Initialized")}onModeChange(n){this.readingMode=n,this.statusMessage="Modo cambiado a "+("simple"===n?"Lectura Simple":"Regleta"),"simple"===n&&(this.regletaProducts=[])}readBarcode(){const n=(this.barcodeInput||"").trim();n?/^\d+$/.test(n)?(this.scannedCodes.includes(n)||this.scannedCodes.push(n),this.fetchProductInfo(n),this.barcodeInput=""):this.statusMessage="El c\xf3digo de barras solo debe contener n\xfameros.":this.statusMessage="Por favor ingrese un c\xf3digo de barras."}mapStorageItemToProduct(n){return{id:n.barcode??n.consecutivo??n.productCode??"",name:n.productName??n.productCode??"Sin nombre",description:n.reference??n.productName??"",price:0,stock:0}}fetchProductInfo(n){this.loading?this.statusMessage="Espere, consulta en curso...":(this.loading=!0,this.statusMessage="Consultando producto...",this.dashService.getStorage({barcode:n}).pipe((0,m.j)(()=>{this.loading=!1})).subscribe({next:i=>{if(!i||!0!==i.ok)return void(this.statusMessage="Respuesta inv\xe1lida del servidor.");const t=i.msg;if(Array.isArray(t)&&0!==t.length)if("simple"===this.readingMode)this.currentProduct=this.mapStorageItemToProduct(t[0]),this.statusMessage=`Producto encontrado: ${this.currentProduct.name}`;else{const s=t.map(d=>this.mapStorageItemToProduct(d));for(const d of s)this.regletaProducts.some(x=>x.id===d.id)||this.regletaProducts.push(d);this.regletaProducts.length>5&&(this.regletaProducts=this.regletaProducts.slice(-5)),this.statusMessage=`Regleta actualizada (${this.regletaProducts.length}/5)`}else this.statusMessage="No se encontr\xf3 informaci\xf3n para el c\xf3digo proporcionado."},error:i=>{console.error("Error al consultar getStorage:",i),this.statusMessage=i?.message?`Error: ${i.message}`:"Error al consultar el backend."}}))}clearData(){this.barcodeInput="",this.scannedCodes=[],this.currentProduct=null,this.regletaProducts=[],this.inventoryArea="",this.personName1="",this.personName2="",this.statusMessage="Datos limpiados"}onKeyPress(n){"Enter"===n.key&&(n.preventDefault(),this.readBarcode())}registerInventory(){if(!this.inventoryArea||!this.personName1||!this.personName2)return void(this.statusMessage="Complete \xc1rea y ambos nombres antes de registrar.");const n="simple"===this.readingMode?this.currentProduct?[this.currentProduct]:[]:this.regletaProducts;0!==n.length?(this.statusMessage=`Registrado ${n.length} producto(s) en '${this.inventoryArea}' por ${this.personName1} y ${this.personName2}.`,this.inventoryArea="",this.personName1="",this.personName2=""):this.statusMessage="No hay productos para registrar."}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-inventory-reader"]],decls:45,vars:11,consts:[["inventoryForm","ngForm"],["noProduct",""],["noRegletaProducts",""],[1,"inventory-container"],[1,"header"],[1,"main-content"],[1,"left-panel"],[1,"mode-selector"],[1,"mode-option"],["type","radio","name","modoLectura","value","simple",3,"ngModelChange","change","ngModel"],["type","radio","name","modoLectura","value","regleta",3,"ngModelChange","change","ngModel"],["for","codigoBarras"],["type","text","id","codigoBarras","placeholder","Escanee o ingrese c\xf3digo de barras","inputmode","numeric","pattern","[0-9]*",3,"ngModelChange","keydown","ngModel"],[1,"button-group"],["id","btnLeer",3,"click"],["id","btnLimpiar",1,"btn-secondary",3,"click"],["class","status-message",4,"ngIf"],["class","codes-list",4,"ngIf"],[1,"right-panel"],["class","product-info",4,"ngIf"],["class","regleta-view",4,"ngIf"],[1,"inventory-form",3,"ngSubmit"],["for","area"],["type","text","id","area","name","area","placeholder","Ingrese \xe1rea","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","nombre1"],["type","text","id","nombre1","name","nombre1","placeholder","Ingrese primer nombre","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","nombre2"],["type","text","id","nombre2","name","nombre2","placeholder","Ingrese segundo nombre","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-register",3,"disabled"],[1,"status-message"],[1,"codes-list"],[4,"ngFor","ngForOf"],[1,"product-info"],[4,"ngIf","ngIfElse"],[1,"placeholder"],[1,"regleta-view"],["class","regleta-products",4,"ngIf","ngIfElse"],[1,"regleta-products"],["class","regleta-product",4,"ngFor","ngForOf"],[1,"regleta-product"]],template:function(i,t){if(1&i){const s=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h1"),e.EFF(3,"Lectura de Inventario con Lector de C\xf3digo de Barras"),e.k0s()(),e.j41(4,"main",5)(5,"section",6)(6,"h2"),e.EFF(7,"Entrada de C\xf3digos"),e.k0s(),e.j41(8,"div",7)(9,"label",8)(10,"input",9),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.readingMode,o)||(t.readingMode=o),a.Njj(o)}),e.bIt("change",function(){return a.eBV(s),a.Njj(t.onModeChange("simple"))}),e.k0s(),e.EFF(11," Lectura Simple "),e.k0s(),e.j41(12,"label",8)(13,"input",10),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.readingMode,o)||(t.readingMode=o),a.Njj(o)}),e.bIt("change",function(){return a.eBV(s),a.Njj(t.onModeChange("regleta"))}),e.k0s(),e.EFF(14," Regleta (4-5 c\xf3digos) "),e.k0s()(),e.j41(15,"label",11),e.EFF(16,"C\xf3digo de Barras"),e.k0s(),e.j41(17,"input",12),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.barcodeInput,o)||(t.barcodeInput=o),a.Njj(o)}),e.bIt("keydown",function(o){return a.eBV(s),a.Njj(t.onKeyPress(o))}),e.k0s(),e.j41(18,"div",13)(19,"button",14),e.bIt("click",function(){return a.eBV(s),a.Njj(t.readBarcode())}),e.EFF(20,"Leer C\xf3digo"),e.k0s(),e.j41(21,"button",15),e.bIt("click",function(){return a.eBV(s),a.Njj(t.clearData())}),e.EFF(22,"Limpiar"),e.k0s()(),e.DNE(23,_,2,1,"div",16)(24,b,2,1,"ul",17),e.k0s(),e.j41(25,"section",18)(26,"h2"),e.EFF(27,"Informaci\xf3n del Producto"),e.k0s(),e.DNE(28,F,4,2,"div",19)(29,C,4,2,"div",20),e.j41(30,"form",21,0),e.bIt("ngSubmit",function(){return a.eBV(s),a.Njj(t.registerInventory())}),e.j41(32,"h3"),e.EFF(33,"Registrar Informaci\xf3n"),e.k0s(),e.j41(34,"label",22),e.EFF(35,"\xc1rea"),e.k0s(),e.j41(36,"input",23),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.inventoryArea,o)||(t.inventoryArea=o),a.Njj(o)}),e.k0s(),e.j41(37,"label",24),e.EFF(38,"Nombre 1"),e.k0s(),e.j41(39,"input",25),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.personName1,o)||(t.personName1=o),a.Njj(o)}),e.k0s(),e.j41(40,"label",26),e.EFF(41,"Nombre 2"),e.k0s(),e.j41(42,"input",27),e.mxI("ngModelChange",function(o){return a.eBV(s),e.DH7(t.personName2,o)||(t.personName2=o),a.Njj(o)}),e.k0s(),e.j41(43,"button",28),e.EFF(44," Registrar al Inventario "),e.k0s()()()()()}if(2&i){const s=e.sdS(31);e.R7$(10),e.R50("ngModel",t.readingMode),e.R7$(3),e.R50("ngModel",t.readingMode),e.R7$(4),e.R50("ngModel",t.barcodeInput),e.R7$(6),e.Y8G("ngIf",t.statusMessage),e.R7$(),e.Y8G("ngIf",t.scannedCodes.length>0),e.R7$(4),e.Y8G("ngIf","simple"===t.readingMode),e.R7$(),e.Y8G("ngIf","regleta"===t.readingMode),e.R7$(7),e.R50("ngModel",t.inventoryArea),e.R7$(3),e.R50("ngModel",t.personName1),e.R7$(3),e.R50("ngModel",t.personName2),e.R7$(),e.Y8G("disabled",!s.form.valid)}},dependencies:[u.MD,u.Sq,u.bT,l.YN,l.qT,l.me,l.Fm,l.BC,l.cb,l.YS,l.R_,l.vS,l.cV],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap";.inventory-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Inter,sans-serif;background:#f5f7fa}.header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4b6cb7,#182848);color:#fff;padding:1.5rem 2rem;text-align:center;font-weight:600;font-size:1.8rem;box-shadow:0 4px 8px #00000026}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;padding:2rem;gap:2rem;max-width:1200px;margin:0 auto;width:100%}.left-panel[_ngcontent-%COMP%]{flex:4;background:#fff;border-radius:12px;padding:2rem;box-shadow:0 8px 20px #0000001a;display:flex;flex-direction:column;gap:1.5rem}.right-panel[_ngcontent-%COMP%]{flex:8;background:#fff;border-radius:12px;padding:2rem;box-shadow:0 8px 20px #0000001a;display:flex;flex-direction:column;gap:1.5rem}h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-weight:600;color:#182848}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;display:block;color:#4b6cb7}input[type=text][_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1.1rem;border:2px solid #d1d9e6;border-radius:8px;transition:border-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus{border-color:#4b6cb7;outline:none;box-shadow:0 0 8px #4b6cb766}.mode-selector[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:1rem;flex-wrap:wrap}.mode-option[_ngcontent-%COMP%]{font-weight:500;color:#555;cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;border:2px solid #d1d9e6;transition:all .3s ease}.mode-option[_ngcontent-%COMP%]:hover{background-color:#f0f4ff}.mode-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{accent-color:#4b6cb7;cursor:pointer;width:18px;height:18px}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem;flex-wrap:wrap}button[_ngcontent-%COMP%]{background:#4b6cb7;color:#fff;border:none;padding:.75rem 1.5rem;font-size:1.1rem;border-radius:8px;cursor:pointer;transition:background-color .3s ease;font-weight:600;box-shadow:0 4px 8px #4b6cb74d;flex:1;min-width:120px}button[_ngcontent-%COMP%]:hover{background:#3a5499}.btn-secondary[_ngcontent-%COMP%]{background:#a0aec0;box-shadow:0 4px 8px #a0aec04d}.btn-secondary[_ngcontent-%COMP%]:hover{background:#7b8a9e}.codes-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:200px;overflow-y:auto;border:1px solid #d1d9e6;border-radius:8px;background:#f9fbff}.codes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #d1d9e6;font-family:monospace;color:#2d3748}.codes-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-info[_ngcontent-%COMP%], .regleta-view[_ngcontent-%COMP%]{background:#f9fbff;border-radius:12px;padding:1.5rem;box-shadow:inset 0 0 10px #4b6cb71a;min-height:200px;font-size:1.1rem;color:#2d3748;flex:1}.placeholder[_ngcontent-%COMP%]{color:#a0aec0;font-style:italic;text-align:center;margin-top:2rem}.status-message[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;background-color:#e6fffa;border:1px solid #b2f5ea;color:#234e52;font-weight:500}.regleta-products[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}.regleta-product[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1rem;box-shadow:0 2px 6px #0000001a;border:1px solid #e2e8f0}.regleta-product[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;color:#4b6cb7}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{flex-direction:column;padding:1rem}.mode-selector[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}']})}}return r})()}}]);