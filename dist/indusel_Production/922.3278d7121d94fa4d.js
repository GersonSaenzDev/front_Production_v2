"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[922],{6821:(I,D,r)=>{r.r(D),r.d(D,{Dashboard:()=>X});var p=r(8728),t=r(3664),O=r(177);const c=void 0,y=["es",[["a.\xa0m.","p.\xa0m."],c,c],c,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],c,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],c,[["a. C.","d. C."],c,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",c,c,c],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[c,"$"],BRL:[c,"R$"],BYN:[c,"\u0440."],CAD:[c,"$"],CNY:[c,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[c,"\xa3"],HKD:[c,"$"],ILS:[c,"\u20aa"],INR:[c,"\u20b9"],JPY:[c,"\xa5"],KRW:[c,"\u20a9"],MXN:[c,"$"],NZD:[c,"$"],PHP:[c,"\u20b1"],RON:[c,"L"],THB:["\u0e3f"],TWD:[c,"NT$"],USD:["US$","$"],XAF:[],XCD:[c,"$"],XOF:[]},"ltr",function b(i){const s=i,e=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===s?1:0===a&&0!==e&&e%1e6==0&&0===o||!(a>=0&&a<=5)?4:5}];var v=r(4341),f=r(2389),P=r(8312),d=r(467),n=r(7705),m=r(6780);let g,u=1;const F={};function T(i){return i in F&&(delete F[i],!0)}const S={setImmediate(i){const s=u++;return F[s]=!0,g||(g=Promise.resolve()),g.then(()=>T(s)&&i()),s},clearImmediate(i){T(i)}},{setImmediate:B,clearImmediate:j}=S,E={setImmediate(...i){const{delegate:s}=E;return(s?.setImmediate||B)(...i)},clearImmediate(i){const{delegate:s}=E;return(s?.clearImmediate||j)(i)},delegate:void 0};var $=r(9687);const x=new class N extends $.q{flush(s){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let a;s=s||o.shift();do{if(a=s.execute(s.state,s.delay))break}while((s=o[0])&&s.id===e&&o.shift());if(this._active=!1,a){for(;(s=o[0])&&s.id===e&&o.shift();)s.unsubscribe();throw a}}}(class k extends m.R{constructor(s,e){super(s,e),this.scheduler=s,this.work=e}requestAsyncId(s,e,o=0){return null!==o&&o>0?super.requestAsyncId(s,e,o):(s.actions.push(this),s._scheduled||(s._scheduled=E.setImmediate(s.flush.bind(s,void 0))))}recycleAsyncId(s,e,o=0){var a;if(null!=o?o>0:this.delay>0)return super.recycleAsyncId(s,e,o);const{actions:l}=s;null!=e&&(null===(a=l[l.length-1])||void 0===a?void 0:a.id)!==e&&(E.clearImmediate(e),s._scheduled===e&&(s._scheduled=void 0))}}),U=["chart"];let R=(()=>{class i{constructor(){this.chart=(0,n.hFB)(),this.annotations=(0,n.hFB)(),this.colors=(0,n.hFB)(),this.dataLabels=(0,n.hFB)(),this.series=(0,n.hFB)(),this.stroke=(0,n.hFB)(),this.labels=(0,n.hFB)(),this.legend=(0,n.hFB)(),this.markers=(0,n.hFB)(),this.noData=(0,n.hFB)(),this.fill=(0,n.hFB)(),this.tooltip=(0,n.hFB)(),this.plotOptions=(0,n.hFB)(),this.responsive=(0,n.hFB)(),this.xaxis=(0,n.hFB)(),this.yaxis=(0,n.hFB)(),this.forecastDataPoints=(0,n.hFB)(),this.grid=(0,n.hFB)(),this.states=(0,n.hFB)(),this.title=(0,n.hFB)(),this.subtitle=(0,n.hFB)(),this.theme=(0,n.hFB)(),this.autoUpdateSeries=(0,n.hFB)(!0),this.chartReady=(0,n.CGW)(),this.chartInstance=(0,p.vPA)(null),this.chartElement=n.ebz.required("chart"),this.ngZone=(0,p.WQX)(t.SKi),this.isBrowser=(0,O.UE)((0,p.WQX)(t.Agw))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{x.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){this.autoUpdateSeries()&&0===Object.keys(e).filter(a=>"series"!==a).length?this.updateSeries(this.series(),!0):this.createElement()}createElement(){var e=this;return(0,d.A)(function*(){const{default:o}=yield r.e(356).then(r.bind(r,4356));window.ApexCharts||=o;const a={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(M=>{const A=e[M]();A&&(a[M]=A)}),e.destroy();const h=e.ngZone.runOutsideAngular(()=>new o(e.chartElement().nativeElement,a));e.chartInstance.set(h),e.render(),e.chartReady.emit({chartObj:h})})()}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,o,a,l){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,o,a,l))}updateSeries(e,o){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,o))}appendSeries(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,o))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,o))}toggleDataPointSelection(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,o))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,o,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,o,a))}addYaxisAnnotation(e,o,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,o,a))}addPointAnnotation(e,o,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,o,a))}removeAnnotation(e,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,o))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["apx-chart"]],viewQuery:function(o,a){1&o&&t.wEZ(a.chartElement,U,5),2&o&&t.NyB()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[t.OA$],decls:2,vars:0,consts:[["chart",""]],template:function(o,a){1&o&&t.nrm(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})(),w=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=p.G2t({})}}return i})();const L=["chart"];let Z=(()=>{class i{constructor(){this.chartData={categories:[],produced:[],valid:[]},this.chartOptions=this.getBaseChartOptions(this.chartData)}ngOnChanges(e){e.chartData&&this.chartData&&this.chartData.categories.length>0&&(this.chartOptions=this.getUpdatedChartOptions(this.chartData))}getUpdatedChartOptions(e){return{series:[{name:"Producidos",data:e.produced},{name:"Programados",data:e.valid}],dataLabels:{enabled:!1},chart:{type:"bar",height:480,stacked:!0,toolbar:{show:!0},background:"transparent"},colors:["#2196f3","#673ab7"],responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},xaxis:{type:"category",categories:e.categories},tooltip:{theme:"light"}}}getBaseChartOptions(e){return this.getUpdatedChartOptions(e)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-bar-chart"]],viewQuery:function(o,a){if(1&o&&t.GBs(L,5),2&o){let l;t.mGM(l=t.lsd())&&(a.chart=l.first)}},inputs:{chartData:"chartData"},features:[t.OA$],decls:8,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"row","mb-3","align-items-center"],[1,"col"],[1,"text-sm"],[2,"width","100%"],[3,"series","chart","dataLabels","plotOptions","responsive","xaxis","colors","tooltip"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.EFF(5,"Produccion: (Ensamble) Top Ten"),t.k0s()()(),t.j41(6,"div",5),t.nrm(7,"apx-chart",6),t.k0s()()()),2&o&&(t.R7$(7),t.Y8G("series",a.chartOptions.series)("chart",a.chartOptions.chart)("dataLabels",a.chartOptions.dataLabels)("plotOptions",a.chartOptions.plotOptions)("responsive",a.chartOptions.responsive)("xaxis",a.chartOptions.xaxis)("colors",a.chartOptions.colors)("tooltip",a.chartOptions.tooltip))},dependencies:[w,R],encapsulation:2})}}return i})();var C=r(2200);const V=(i,s)=>s.productCode;function W(i,s){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"titlecase"),t.k0s(),t.j41(6,"td",47),t.EFF(7),t.nI1(8,"number"),t.k0s(),t.j41(9,"td",48),t.EFF(10),t.nI1(11,"number"),t.k0s(),t.j41(12,"td",49),t.EFF(13),t.nI1(14,"number"),t.k0s()()),2&i){const e=s.$implicit;t.R7$(2),t.JRh(e.productCode),t.R7$(2),t.JRh(t.bMT(5,5,e.productName)),t.R7$(3),t.JRh(t.bMT(8,7,e.Producidos)),t.R7$(3),t.JRh(t.bMT(11,9,e.Validos)),t.R7$(3),t.JRh(t.bMT(14,11,e.Producidos-e.Validos))}}function H(i,s){1&i&&(t.j41(0,"tr")(1,"td",50),t.EFF(2,"No hay datos de producci\xf3n disponibles para este rango y fecha."),t.k0s()())}(0,O.EO)(y,"es");let X=(()=>{class i{constructor(){this.dashboardService=(0,p.WQX)(P.T),this.selectedDate=this.formatDate(new Date),this.totalProductoTerminado=0,this.productoValidado=0,this.productoConError=0,this.duplicados=0,this.timeStart="06:00",this.timeEnd="21:30",this.barChartData={categories:[],produced:[],valid:[]},this.totalProducts=[],this.ListGroup=[];const e=this.formatDateForBackend(new Date);this.loadDataForDate(e),this.loadTopProductsData(e)}formatDate(e){const o=new Date(e);let a=""+(o.getMonth()+1),l=""+o.getDate();const h=o.getFullYear();return a.length<2&&(a="0"+a),l.length<2&&(l="0"+l),[h,a,l].join("-")}formatDateForBackend(e){const o="string"==typeof e?new Date(e.replace(/-/g,"/")):e;let a=""+o.getDate(),l=""+(o.getMonth()+1);const h=o.getFullYear();return l.length<2&&(l="0"+l),a.length<2&&(a="0"+a),[a,l,h].join("/")}onDateChange(e){console.log(`Nueva fecha seleccionada (Input): ${e}`);const o=this.formatDateForBackend(e);this.loadDataForDate(o),this.loadTopProductsData(o),this.loadTotalProducts(o,this.timeStart,this.timeEnd)}onTimeRangeChange(){console.log(`Rango horario cambiado. Inicio: ${this.timeStart}, Fin: ${this.timeEnd}`);const e=this.formatDateForBackend(this.selectedDate);this.loadTotalProducts(e,this.timeStart,this.timeEnd)}loadTotalProducts(e,o,a){console.log(`[Servicio] Iniciando consulta de Producci\xf3n Total del D\xeda para la fecha: ${e} y rango ${o}-${a}`),this.dashboardService.getTotalProductsDay(e,o,a).subscribe({next:l=>{console.log("%c[Backend OK] Datos de Producci\xf3n Total recibidos:","color: orange; font-weight: bold;"),this.totalProducts=l.msg},error:l=>{console.error("%c[Backend ERROR] Fallo al consultar Producci\xf3n Total:","color: red; font-weight: bold;"),console.error(l),this.totalProducts=[]}})}loadDataForDate(e){console.log(`[Servicio] Iniciando consulta de m\xe9tricas de tarjeta para la fecha: ${e}`),this.dashboardService.getCardMetrics(e).subscribe({next:o=>{console.log(`%c[Backend OK] Datos de m\xe9tricas recibidos correctamente para ${e}:`,"color: green; font-weight: bold;"),console.log(o.msg);const a=o.msg;this.totalProductoTerminado=a.TotalReadingsRecorded,this.productoValidado=a.TotalValidUnits,this.productoConError=a.TotalErrorMarked,this.duplicados=a.TotalDuplicated,console.log("[Dashboard] M\xe9tricas de Tarjetas Actualizadas:",{totalProductoTerminado:this.totalProductoTerminado,productoValidado:this.productoValidado})},error:o=>{console.error(`%c[Backend ERROR] Fallo al consultar m\xe9tricas para ${e}:`,"color: red; font-weight: bold;"),console.error(o),this.totalProductoTerminado=0,this.productoValidado=0,this.productoConError=0,this.duplicados=0}})}loadTopProductsData(e){console.log(`[Servicio] Iniciando consulta de Top Products para la fecha: ${e}`),this.dashboardService.getTopProductsChartData(e).subscribe({next:o=>{console.log("%c[Backend OK] Datos de Top Products (Gr\xe1fico) recibidos:","color: blue; font-weight: bold;"),this.barChartData=o.msg},error:o=>{console.error(`%c[Backend ERROR] Fallo al consultar Top Products para ${e}:`,"color: red; font-weight: bold;"),console.error(o),this.barChartData={categories:[],produced:[],valid:[]}}})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-dashboard"]],features:[t.Jv_([{provide:t.xe9,useValue:"es"}])],decls:103,vars:31,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"card","bg-primary-subtle","text-dark","overflow-hidden"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-1"],[1,"text-muted","mb-0","opacity-75","text-sm"],[1,"col-12","col-md-3"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-xl-4","col-md-6"],[1,"card","earning-card","bg-light-secondary","text-white","overflow-hidden"],[1,"round","secondary-round","small"],[1,"round","secondary-round","big"],[1,"text-secondary","d-block","f-34","f-w-500","my-2"],[1,"ti","ti-circle-arrow-up-right","opacity-50"],[1,"text-muted","mb-0","opacity-50"],[1,"card","earning-card","bg-secondary-dark","text-white","overflow-hidden"],[1,"text-white","d-block","f-34","f-w-500","my-2"],[1,"mb-0","opacity-50"],[1,"col-xl-4","col-md-12"],[1,"card","total-income-card","overflow-hidden","bg-secondary-dark","text-white"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","icon","m-r-5"],[1,"text-white","ti","ti-layout-board-split","f-24"],[1,"ms-2"],[1,"text-white","f-w-600","mb-1"],[1,"mb-0","opacity-50","text-sm"],[1,"card","total-income-card","warning","overflow-hidden"],[1,"avatar","avatar-lg","icon-warning","m-r-5"],[1,"text-warning","ti","ti-layout-board-split","f-24"],[1,"f-w-600","mb-1"],[1,"col-12","mt-4"],[3,"chartData"],[1,"card"],[1,"card-header","bg-light-secondary","text-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"text-muted","mb-0"],[1,"card-body","border-bottom"],[1,"row","g-3","align-items-end"],[1,"form-label"],["type","time",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-12","col-md-auto","d-grid"],[1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"text-end"],[1,"text-end","text-primary","f-w-600"],[1,"text-end","text-success"],[1,"text-end","text-danger"],["colspan","5",1,"text-center","text-muted"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h4",5),t.EFF(7,"Consultar por Fecha \u{1f4c5}"),t.k0s(),t.j41(8,"p",6),t.EFF(9," Fecha Seleccionada: "),t.j41(10,"strong"),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"div",7)(14,"input",8),t.mxI("ngModelChange",function(h){return t.DH7(a.selectedDate,h)||(a.selectedDate=h),h}),t.bIt("change",function(){return a.onDateChange(a.selectedDate)}),t.k0s()()()()()(),t.j41(15,"div",9)(16,"div",10),t.nrm(17,"span",11)(18,"span",12),t.j41(19,"div",3)(20,"span",13),t.EFF(21),t.nI1(22,"number"),t.nrm(23,"i",14),t.k0s(),t.j41(24,"p",15),t.EFF(25,"Total Producto Terminado"),t.k0s()()()(),t.j41(26,"div",9)(27,"div",16),t.nrm(28,"span",11)(29,"span",12),t.j41(30,"div",3)(31,"span",17),t.EFF(32),t.nI1(33,"number"),t.nrm(34,"i",14),t.k0s(),t.j41(35,"p",18),t.EFF(36,"Producto Validado"),t.k0s()()()(),t.j41(37,"div",19)(38,"div",20)(39,"div",3)(40,"div",21)(41,"div",22),t.nrm(42,"i",23),t.k0s(),t.j41(43,"div",24)(44,"h4",25),t.EFF(45),t.nI1(46,"number"),t.k0s(),t.j41(47,"p",26),t.EFF(48,"Producto con Error"),t.k0s()()()()(),t.j41(49,"div",27)(50,"div",3)(51,"div",21)(52,"div",28),t.nrm(53,"i",29),t.k0s(),t.j41(54,"div",24)(55,"h4",30),t.EFF(56),t.nI1(57,"number"),t.k0s(),t.j41(58,"p",26),t.EFF(59,"Duplicados"),t.k0s()()()()()(),t.j41(60,"div",31),t.nrm(61,"app-bar-chart",32),t.k0s(),t.j41(62,"div",31)(63,"div",33)(64,"div",34)(65,"div",35)(66,"div",36)(67,"h5"),t.EFF(68,"Producci\xf3n del d\xeda Detallada"),t.k0s(),t.j41(69,"p",37),t.EFF(70),t.nI1(71,"date"),t.k0s()()()(),t.j41(72,"div",38)(73,"div",39)(74,"div",7)(75,"label",40),t.EFF(76,"Hora de Inicio"),t.k0s(),t.j41(77,"input",41),t.mxI("ngModelChange",function(h){return t.DH7(a.timeStart,h)||(a.timeStart=h),h}),t.bIt("change",function(){return a.onTimeRangeChange()}),t.k0s()(),t.j41(78,"div",7)(79,"label",40),t.EFF(80,"Hora de Fin"),t.k0s(),t.j41(81,"input",41),t.mxI("ngModelChange",function(h){return t.DH7(a.timeEnd,h)||(a.timeEnd=h),h}),t.bIt("change",function(){return a.onTimeRangeChange()}),t.k0s()(),t.j41(82,"div",42)(83,"button",43),t.bIt("click",function(){return a.onTimeRangeChange()}),t.EFF(84,"Aplicar Filtro"),t.k0s()()()(),t.j41(85,"div",44)(86,"table",45)(87,"thead")(88,"tr")(89,"th"),t.EFF(90,"C\xf3digo Producto"),t.k0s(),t.j41(91,"th"),t.EFF(92,"Nombre Producto"),t.k0s(),t.j41(93,"th",46),t.EFF(94,"Producidos (Total)"),t.k0s(),t.j41(95,"th",46),t.EFF(96,"V\xe1lidos"),t.k0s(),t.j41(97,"th",46),t.EFF(98,"Errores"),t.k0s()()(),t.j41(99,"tbody"),t.Z7z(100,W,15,13,"tr",null,V,!1,H,3,0,"tr"),t.k0s()()()()()()),2&o&&(t.R7$(11),t.JRh(t.ii3(12,13,a.selectedDate,"fullDate","","es")),t.R7$(3),t.R50("ngModel",a.selectedDate),t.R7$(7),t.SpI(" ",t.bMT(22,18,a.totalProductoTerminado)," "),t.R7$(11),t.SpI(" ",t.bMT(33,20,a.productoValidado)," "),t.R7$(13),t.JRh(t.bMT(46,22,a.productoConError)),t.R7$(11),t.JRh(t.bMT(57,24,a.duplicados)),t.R7$(5),t.Y8G("chartData",a.barChartData),t.R7$(9),t.E5c(" Productos Seleccionado para ",t.ii3(71,26,a.selectedDate,"shortDate","","es")," (De ",a.timeStart," a ",a.timeEnd,") "),t.R7$(7),t.R50("ngModel",a.timeStart),t.R7$(4),t.R50("ngModel",a.timeEnd),t.R7$(19),t.Dyx(a.totalProducts))},dependencies:[Z,f.G,v.me,v.BC,v.vS,C.QX,C.PV,C.vh,v.YN],styles:[".nav-tabs[_ngcontent-%COMP%]{border-bottom:none!important}body.berry-dark[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], body.berry-dark[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{box-shadow:none!important;background:none!important}.earning-card[_ngcontent-%COMP%]   .round.secondary-round[_ngcontent-%COMP%]{background:#4527a0}.earning-card[_ngcontent-%COMP%]   .round.primary-round[_ngcontent-%COMP%], .total-income-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background:#1565c0}.table-responsive[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0f7fa;cursor:pointer}"]})}}return i})()},7922:(I,D,r)=>{r.r(D),r.d(D,{ProductionModule:()=>P});var p=r(2200),t=r(8132),O=r(6821),c=r(3664),b=r(8728);const y=[{path:"",component:O.Dashboard,children:[{path:"dashboard",loadComponent:()=>Promise.resolve().then(r.bind(r,6821)).then(d=>d.Dashboard)}]},{path:"productionNews",loadComponent:()=>Promise.all([r.e(76),r.e(698)]).then(r.bind(r,8698)).then(d=>d.ProductionNews)},{path:"wineryNews",loadComponent:()=>Promise.all([r.e(76),r.e(858)]).then(r.bind(r,1858)).then(d=>d.WineryNews)}];let v=(()=>{class d{static{this.\u0275fac=function(u){return new(u||d)}}static{this.\u0275mod=c.$C({type:d})}static{this.\u0275inj=b.G2t({imports:[t.iI.forChild(y),t.iI]})}}return d})();var f=r(3525);let P=(()=>{class d{static{this.\u0275fac=function(u){return new(u||d)}}static{this.\u0275mod=c.$C({type:d})}static{this.\u0275inj=b.G2t({imports:[p.MD,f.oi,v]})}}return d})()},8312:(I,D,r)=>{r.d(D,{T:()=>v});var p=r(8728),t=r(9330),O=r(8810),c=r(9437),b=r(6354),y=r(2525);let v=(()=>{class f{constructor(){this.http=(0,p.WQX)(t.Qq),this.BASE_URL=y.c.backendUrl,this.CARD_METRICS_ENDPOINT=`${this.BASE_URL}/api/v1/assembly/cardAssembly`,this.TOP_PRODUCTION_ENDPOINT=`${this.BASE_URL}/api/v1/assembly/topProducts`,this.TOTAL_PRODUCTION_ENDPOINT=`${this.BASE_URL}/api/v1/assembly/totalProductsDay`,this.VIEW_REF_ENDPOINT=`${this.BASE_URL}/api/v1/assembly/viewRef`}handleError(d){console.error("DashboardServices: Error en la petici\xf3n:",d);let n="Ocurri\xf3 un error desconocido en el servicio.";return d.error&&d.error.msg?n=d.error.msg:d.message&&(n=d.message),(0,O.$)(()=>new Error(`Fall\xf3 la consulta al backend: ${n}`))}getCardMetrics(d){return this.http.post(this.CARD_METRICS_ENDPOINT,{date:d}).pipe((0,c.W)(this.handleError.bind(this)))}getTopProduction(d){return this.http.post(this.TOP_PRODUCTION_ENDPOINT,{date:d}).pipe((0,c.W)(this.handleError.bind(this)))}getTopProductsChartData(d){return this.getTopProduction(d).pipe((0,b.T)(n=>{if(console.log("Respuesta CRUDA del backend (getTopProduction):",n),!n.ok||!n.msg||0===n.msg.length)return console.warn("Backend respondi\xf3 sin datos v\xe1lidos. Se devuelve estructura vac\xeda."),{ok:!1,msg:{categories:[],produced:[],valid:[]}};const m=n.msg.reduce((u,g)=>(u.categories.push(`${g.productName.trim()}`),u.produced.push(g.Producidos),u.valid.push(g.Validos),u),{categories:[],produced:[],valid:[]});return console.log("Datos TRANSFORMADOS para el gr\xe1fico:",m),{ok:!0,msg:m}}))}getTotalProductsDay(d,n,m){const u={date:d};return n&&(u.timeStart=n),m&&(u.timeEnd=m),console.log("SERVICIOS - CONTROL: Petici\xf3n a totalProductsDay con body:",u),this.http.post(this.TOTAL_PRODUCTION_ENDPOINT,u).pipe((0,c.W)(this.handleError.bind(this)),(0,b.T)(g=>(console.log("SERVICIOS - CONTROL: Respuesta del backend (totalProductsDay):",g),g.msg?g:{ok:g.ok,msg:[]})))}searchReferences(d){const n={reference:d};return console.log("SERVICIOS - CONTROL: Petici\xf3n a viewRef con body:",n),this.http.post(this.VIEW_REF_ENDPOINT,n).pipe((0,c.W)(this.handleError.bind(this)),(0,b.T)(m=>m.msg?m:{ok:m.ok,msg:[]}))}static{this.\u0275fac=function(n){return new(n||f)}}static{this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()}}]);