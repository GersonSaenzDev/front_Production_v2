"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[76],{152:(O,u,o)=>{o.d(u,{B:()=>n});var r=o(3236),_=o(9974),h=o(4360);function n(d,l=r.E){return(0,_.N)((p,s)=>{let E=null,e=null,t=null;const a=()=>{if(E){E.unsubscribe(),E=null;const i=e;e=null,s.next(i)}};function c(){const i=t+d,P=l.now();if(P<i)return E=this.schedule(void 0,i-P),void s.add(E);a()}p.subscribe((0,h._)(s,i=>{e=i,t=l.now(),E||(E=l.schedule(c,d),s.add(E))},()=>{a(),s.complete()},void 0,()=>{e=E=null}))})}},4061:(O,u,o)=>{o.d(u,{s:()=>p});var r=o(8728),_=o(9330),h=o(8810),n=o(9437),d=o(6354),l=o(2525);let p=(()=>{class s{constructor(){this.http=(0,r.WQX)(_.Qq),this.BASE_URL=l.c.backendUrl,this.PRODUCTION_NEWS_ENDPOINT=`${this.BASE_URL}/api/v1/assembly/productionNews`,this.WAREHOUSE_NEWS_ENDPOINT=`${this.BASE_URL}/api/v1/storage/newsWarehouse`}handleError(e){console.error("NewsServices: Error en la petici\xf3n:",e);let t="Ocurri\xf3 un error desconocido en el servicio.";return e.error&&e.error.msg?t=e.error.msg:e.message&&(t=e.message),(0,h.$)(()=>new Error(`Fall\xf3 la consulta al backend: ${t}`))}createProductionNews(e){return console.log("NEWS SERVICES - CONTROL: Petici\xf3n a productionNews con body:",e),this.http.post(this.PRODUCTION_NEWS_ENDPOINT,e).pipe((0,n.W)(this.handleError.bind(this)),(0,d.T)(t=>(console.log("NEWS SERVICES - CONTROL: Respuesta del backend (productionNews):",t),t)))}createWarehouseNews(e){return console.log("NEWS SERVICES - CONTROL: Petici\xf3n a newsWarehouse con body:",e),this.http.post(this.WAREHOUSE_NEWS_ENDPOINT,e).pipe((0,n.W)(this.handleError.bind(this)),(0,d.T)(t=>(console.log("NEWS SERVICES - CONTROL: Respuesta del backend (newsWarehouse):",t),t)))}validateProductionNews(e){const t=[];return e.newsDate||t.push("La fecha de novedad es obligatoria"),e.category||t.push("La categor\xeda es obligatoria"),e.assemblyLine||t.push("La l\xednea de ensamble es obligatoria"),e.detail||t.push("El detalle es obligatorio"),("Parada de Linea"===e.category||"Parada de L\xednea"===e.category)&&(e.stopType||t.push("El tipo de parada es obligatorio para Parada de L\xednea"),e.startTime||t.push("La hora de inicio es obligatoria para Parada de L\xednea"),e.endTime||t.push("La hora de fin es obligatoria para Parada de L\xednea"),e.totalTime||t.push("El tiempo total es obligatorio para Parada de L\xednea")),{valid:0===t.length,errors:t}}validateWarehouseNews(e){const t=[];e.newsDate||t.push("La fecha de novedad es obligatoria"),e.category||t.push("La categor\xeda es obligatoria"),e.reference||t.push("La referencia del producto es obligatoria"),e.reportedAmount||t.push("La cantidad reportada es obligatoria"),e.description||t.push("La descripci\xf3n es obligatoria");const a=parseInt(e.reportedAmount);return(isNaN(a)||a<=0)&&t.push("La cantidad reportada debe ser un n\xfamero mayor a 0"),e.description&&e.description.trim().length<10&&t.push("La descripci\xf3n debe tener al menos 10 caracteres"),{valid:0===t.length,errors:t}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=r.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},4799:(O,u,o)=>{o.d(u,{A:()=>h});const r=void 0,h=["es",[["a.\xa0m.","p.\xa0m."],r,r],r,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],r,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],r,[["a. C.","d. C."],r,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",r,r,r],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[r,"$"],BRL:[r,"R$"],BYN:[r,"\u0440."],CAD:[r,"$"],CNY:[r,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[r,"\xa3"],HKD:[r,"$"],ILS:[r,"\u20aa"],INR:[r,"\u20b9"],JPY:[r,"\xa5"],KRW:[r,"\u20a9"],MXN:[r,"$"],NZD:[r,"$"],PHP:[r,"\u20b1"],RON:[r,"L"],THB:["\u0e3f"],TWD:[r,"NT$"],USD:["US$","$"],XAF:[],XCD:[r,"$"],XOF:[]},"ltr",function _(n){const d=n,l=Math.floor(Math.abs(n)),p=n.toString().replace(/^[^.]*\.?/,"").length,s=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===d?1:0===s&&0!==l&&l%1e6==0&&0===p||!(s>=0&&s<=5)?4:5}]},8312:(O,u,o)=>{o.d(u,{T:()=>p});var r=o(8728),_=o(9330),h=o(8810),n=o(9437),d=o(6354),l=o(2525);let p=(()=>{class s{constructor(){this.http=(0,r.WQX)(_.Qq),this.BASE_URL=l.c.backendUrl,this.BASE_API=l.c.api,this.CARD_METRICS_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/assembly/cardAssembly`,this.TOP_PRODUCTION_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/assembly/topProducts`,this.TOTAL_PRODUCTION_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/assembly/totalProductsDay`,this.VIEW_REF_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/assembly/viewRef`}handleError(e){let t="Ocurri\xf3 un error desconocido en el servicio.";return e.error&&e.error.msg?t=e.error.msg:e.message&&(t=e.message),(0,h.$)(()=>new Error(`Fall\xf3 la consulta al backend: ${t}`))}getCardMetrics(e){return this.http.post(this.CARD_METRICS_ENDPOINT,{date:e}).pipe((0,n.W)(this.handleError.bind(this)))}getTopProduction(e){return this.http.post(this.TOP_PRODUCTION_ENDPOINT,{date:e}).pipe((0,n.W)(this.handleError.bind(this)))}getTopProductsChartData(e){return this.getTopProduction(e).pipe((0,d.T)(t=>{if(!t.ok||!t.msg||0===t.msg.length)return console.warn("Backend respondi\xf3 sin datos v\xe1lidos. Se devuelve estructura vac\xeda."),{ok:!1,msg:{categories:[],produced:[],valid:[]}};const a=t.msg.reduce((c,i)=>(c.categories.push(`${i.productName.trim()}`),c.produced.push(i.Producidos),c.valid.push(i.Validos),c),{categories:[],produced:[],valid:[]});return console.log("Datos TRANSFORMADOS para el gr\xe1fico:",a),{ok:!0,msg:a}}))}getTotalProductsDay(e,t,a){const c={date:e};return t&&(c.timeStart=t),a&&(c.timeEnd=a),this.http.post(this.TOTAL_PRODUCTION_ENDPOINT,c).pipe((0,n.W)(this.handleError.bind(this)),(0,d.T)(i=>(console.log("SERVICIOS - CONTROL: Respuesta del backend (totalProductsDay):",i),i.msg?i:{ok:i.ok,msg:[]})))}searchReferences(e){return this.http.post(this.VIEW_REF_ENDPOINT,{reference:e}).pipe((0,n.W)(this.handleError.bind(this)),(0,d.T)(a=>a.msg?a:{ok:a.ok,msg:[]}))}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=r.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()}}]);