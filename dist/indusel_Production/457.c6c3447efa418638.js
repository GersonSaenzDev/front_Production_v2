"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[457],{3140:(j,v,c)=>{c.d(v,{B:()=>b});var C=c(8728),E=c(9330),s=c(8810),t=c(9437),u=c(2525);let b=(()=>{class _{constructor(){this.http=(0,C.WQX)(E.Qq),this.BASE_URL=u.c.backendUrl,this.BASE_API=u.c.api,this.SEE_GROUPS_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/seeGroups`,this.CONFIRMED_COUNT_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/confirmedCount`,this.DUPLICATES_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/duplicates`,this.GLOBALCOUNT_ENDPOINT=`${this.BASE_URL}${this.BASE_API}/storage/countGlobal`,this.GLOBALCOUNT_TEAMCOUNT=`${this.BASE_URL}${this.BASE_API}/storage/teamCount`,this.GLOBALCOUNT_AREACOUNT=`${this.BASE_URL}${this.BASE_API}/storage/areaCount`,this.GLOBALCOUNT_VIEWINVENTORIES=`${this.BASE_URL}${this.BASE_API}/storage/viewInventories`,this.GLOBALCOUNT_TEAMITEMS=`${this.BASE_URL}${this.BASE_API}/storage/TeamItems`,this.GLOBALCOUNT_NOTCOMPLIANT=`${this.BASE_URL}${this.BASE_API}/storage/notCompliant`,this.GLOBALCOUNT_AUDITNOTE=`${this.BASE_URL}${this.BASE_API}/storage/auditNote`,this.GLOBALCOUNT_STORAGE=`${this.BASE_URL}${this.BASE_API}/storage`,this.GLOBALCOUNT_INSERTINVENTORY=`${this.BASE_URL}${this.BASE_API}/storage/insertInventory`}handleError(d){console.error("DashInventoryServices: Error en la petici\xf3n:",d);let l="Ocurri\xf3 un error desconocido en el servicio.";return d.error&&d.er?.msg?l=d.error.msg:d.message&&(l=d.message),(0,s.$)(()=>new Error(`Fall\xf3 la consulta al backend: ${l}`))}getStorageGroups(d){return this.http.post(this.SEE_GROUPS_ENDPOINT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getConfirmedCount(d){return this.http.post(this.CONFIRMED_COUNT_ENDPOINT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getDuplicates(d){return this.http.post(this.DUPLICATES_ENDPOINT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getCountGlobal(d){return this.http.post(this.GLOBALCOUNT_ENDPOINT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getTeamCount(d){return this.http.post(this.GLOBALCOUNT_TEAMCOUNT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getAreaCount(d){return this.http.post(this.GLOBALCOUNT_AREACOUNT,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getViewInventories(d){return this.http.post(this.GLOBALCOUNT_VIEWINVENTORIES,{date:d}).pipe((0,t.W)(this.handleError.bind(this)))}getTeamItems(d,l){const F={date:d,...l};return this.http.post(this.GLOBALCOUNT_TEAMITEMS,F).pipe((0,t.W)(this.handleError.bind(this)))}getNotCompliant(d,l){const F={date:d,...l};return this.http.post(this.GLOBALCOUNT_NOTCOMPLIANT,F).pipe((0,t.W)(this.handleError.bind(this)))}getAuditNote(d){return this.http.post(this.GLOBALCOUNT_AUDITNOTE,d).pipe((0,t.W)(this.handleError.bind(this)))}getStorage(d){return this.http.post(this.GLOBALCOUNT_STORAGE,d).pipe((0,t.W)(this.handleError.bind(this)))}getInsertInventory(d){return this.http.post(this.GLOBALCOUNT_INSERTINVENTORY,d).pipe((0,t.W)(this.handleError.bind(this)))}static{this.\u0275fac=function(l){return new(l||_)}}static{this.\u0275prov=C.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},5457:(j,v,c)=>{c.r(v),c.d(v,{WarehouseModule:()=>d});var C=c(2200),E=c(8132),s=c(8101),t=c(3664),u=c(8728);const b=[{path:"",component:s.DashInventories,children:[{path:"dash",loadComponent:()=>Promise.resolve().then(c.bind(c,8101)).then(l=>l.DashInventories)}]},{path:"checkNews",loadComponent:()=>c.e(899).then(c.bind(c,1899)).then(l=>l.CheckNews)},{path:"configInventories",loadComponent:()=>c.e(109).then(c.bind(c,4109)).then(l=>l.ConfigureInventories)},{path:"enterInventory",loadComponent:()=>c.e(7).then(c.bind(c,4007)).then(l=>l.InventoryReader)}];let _=(()=>{class l{static{this.\u0275fac=function(I){return new(I||l)}}static{this.\u0275mod=t.$C({type:l})}static{this.\u0275inj=u.G2t({imports:[E.iI.forChild(b),E.iI]})}}return l})();var R=c(8652);let d=(()=>{class l{static{this.\u0275fac=function(I){return new(I||l)}}static{this.\u0275mod=t.$C({type:l})}static{this.\u0275inj=u.G2t({imports:[C.MD,R.oi,_]})}}return l})()},8101:(j,v,c)=>{c.r(v),c.d(v,{DashInventories:()=>J});var C=c(177),E=c(4799),s=c(8728),t=c(3664),u=c(4341),b=c(8810),_=c(3140),R=c(2389),d=c(2200);function l(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function F(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.JRh(e.label)}}function D(a,m){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td",60)(12,"button",63),t.bIt("click",function(){const o=s.eBV(e).$implicit,i=t.XpG(2);return s.Njj(i.openAnnotationModal(o))}),t.nrm(13,"i",64),t.k0s()()()}if(2&a){const e=m.$implicit,n=t.XpG(2);t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.codRef),t.R7$(2),t.JRh(e.referencia),t.R7$(2),t.JRh(e.area),t.R7$(2),t.JRh(e.teamLabel||n.computeTeamKey(e))}}function I(a,m){1&a&&(t.j41(0,"tr")(1,"td",65),t.EFF(2,"No hay registros para la fecha seleccionada"),t.k0s()())}function k(a,m){if(1&a){const e=t.RV6();t.j41(0,"div")(1,"div",48)(2,"div",49)(3,"input",50),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterText,o)||(i.filterText=o),s.Njj(o)}),t.bIt("ngModelChange",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyGlobalFilters())}),t.k0s()(),t.j41(4,"div",49)(5,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterArea,o)||(i.filterArea=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyGlobalFilters())}),t.j41(6,"option",52),t.EFF(7,"Todas las \xc1reas"),t.k0s(),t.DNE(8,l,2,2,"option",53),t.k0s()(),t.j41(9,"div",49)(10,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterTeam,o)||(i.filterTeam=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyGlobalFilters())}),t.j41(11,"option",52),t.EFF(12,"Todos los Equipos"),t.k0s(),t.DNE(13,F,2,2,"option",53),t.k0s()(),t.j41(14,"div",54)(15,"button",55),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.resetGlobalFilters())}),t.EFF(16,"Reset"),t.k0s(),t.j41(17,"button",56),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.loadAllData(o.formatDateForBackend(o.selectedDate)))}),t.EFF(18,"Refrescar"),t.k0s()()(),t.j41(19,"div",57)(20,"table",58)(21,"thead",59)(22,"tr")(23,"th"),t.EFF(24,"C\xf3digo"),t.k0s(),t.j41(25,"th"),t.EFF(26,"CodRef"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Referencia"),t.k0s(),t.j41(29,"th"),t.EFF(30,"\xc1rea"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Equipo"),t.k0s(),t.j41(33,"th",60),t.EFF(34,"Anotaciones"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,D,14,5,"tr",61)(37,I,3,0,"tr",46),t.k0s()()()()}if(2&a){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.filterText),t.R7$(2),t.R50("ngModel",e.filterArea),t.R7$(3),t.Y8G("ngForOf",e.areaOptions),t.R7$(2),t.R50("ngModel",e.filterTeam),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(23),t.Y8G("ngForOf",e.filteredInventory),t.R7$(),t.Y8G("ngIf",0===e.filteredInventory.length)}}function N(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.Lme("",e.label," \u2014 ",e.area)}}function A(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.Lme("",e.label," \u2014 ",e.area)}}function y(a,m){if(1&a){const e=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){s.eBV(e);const o=t.XpG(2);return s.Njj(o.exportComparison())}),t.nrm(1,"i",76),t.EFF(2," Exportar Diferencias "),t.k0s()}}function O(a,m){if(1&a&&(t.j41(0,"tr")(1,"td",85)(2,"strong"),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"small"),t.EFF(6),t.k0s()()()),2&a){const e=m.$implicit;t.R7$(3),t.JRh(e.code),t.R7$(3),t.JRh(e.referencia)}}function M(a,m){1&a&&(t.j41(0,"tr")(1,"td",86),t.EFF(2,"\xa1Todo coincide! No hay faltantes."),t.k0s()())}function x(a,m){if(1&a&&(t.j41(0,"tr")(1,"td",87)(2,"strong"),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"small"),t.EFF(6),t.k0s()()()),2&a){const e=m.$implicit;t.R7$(3),t.JRh(e.code),t.R7$(3),t.JRh(e.referencia)}}function L(a,m){1&a&&(t.j41(0,"tr")(1,"td",86),t.EFF(2,"\xa1Todo coincide! No hay faltantes."),t.k0s()())}function G(a,m){if(1&a&&(t.j41(0,"div",0)(1,"div",67)(2,"div",77)(3,"div",78)(4,"span"),t.EFF(5,"Solo en Equipo A (Faltan en B)"),t.k0s(),t.j41(6,"span",79),t.EFF(7),t.k0s()(),t.j41(8,"div",80)(9,"table",81)(10,"thead")(11,"tr")(12,"th"),t.EFF(13,"C\xf3digo"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Referencia"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,O,7,2,"tr",61)(18,M,3,0,"tr",46),t.k0s()()()()(),t.j41(19,"div",67)(20,"div",82)(21,"div",83)(22,"span"),t.EFF(23,"Solo en Equipo B (Faltan en A)"),t.k0s(),t.j41(24,"span",84),t.EFF(25),t.k0s()(),t.j41(26,"div",80)(27,"table",81)(28,"thead")(29,"tr")(30,"th"),t.EFF(31,"C\xf3digo"),t.k0s(),t.j41(32,"th"),t.EFF(33,"Referencia"),t.k0s()()(),t.j41(34,"tbody"),t.DNE(35,x,7,2,"tr",61)(36,L,3,0,"tr",46),t.k0s()()()()()()),2&a){const e=t.XpG(2);t.R7$(7),t.JRh(e.comparisonDetails.leftMissing.length),t.R7$(10),t.Y8G("ngForOf",e.comparisonDetails.leftMissing),t.R7$(),t.Y8G("ngIf",0===e.comparisonDetails.leftMissing.length),t.R7$(7),t.JRh(e.comparisonDetails.rightMissing.length),t.R7$(10),t.Y8G("ngForOf",e.comparisonDetails.rightMissing),t.R7$(),t.Y8G("ngIf",0===e.comparisonDetails.rightMissing.length)}}function B(a,m){if(1&a){const e=t.RV6();t.j41(0,"div")(1,"div",66)(2,"div",67)(3,"div",68)(4,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.selectedTeamLeft,o)||(i.selectedTeamLeft=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.onSelectTeam("left"))}),t.j41(5,"option",52),t.EFF(6,"Equipo A (Referencia)"),t.k0s(),t.DNE(7,N,2,3,"option",53),t.k0s(),t.j41(8,"button",69),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.clearTeam("left"))}),t.EFF(9,"Limpiar"),t.k0s()()(),t.j41(10,"div",67)(11,"div",68)(12,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.selectedTeamRight,o)||(i.selectedTeamRight=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.onSelectTeam("right"))}),t.j41(13,"option",52),t.EFF(14,"Equipo B (Validaci\xf3n)"),t.k0s(),t.DNE(15,A,2,3,"option",53),t.k0s(),t.j41(16,"button",69),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.clearTeam("right"))}),t.EFF(17,"Limpiar"),t.k0s()()()(),t.j41(18,"div",70)(19,"button",71),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.compareTeams())}),t.nrm(20,"i",72),t.EFF(21," Ejecutar Cruce de Inventario "),t.k0s(),t.DNE(22,y,3,0,"button",73),t.k0s(),t.DNE(23,G,37,6,"div",74),t.k0s()}if(2&a){const e=t.XpG();t.R7$(4),t.R50("ngModel",e.selectedTeamLeft),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(5),t.R50("ngModel",e.selectedTeamRight),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(4),t.Y8G("disabled",!e.teamLeft||!e.teamRight),t.R7$(3),t.Y8G("ngIf",e.comparisonResult),t.R7$(),t.Y8G("ngIf",e.comparisonDetails)}}function $(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function P(a,m){if(1&a&&(t.j41(0,"option",62),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e.key),t.R7$(),t.JRh(e.label)}}function S(a,m){1&a&&(t.j41(0,"span"),t.EFF(1,", "),t.k0s())}function w(a,m){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.DNE(2,S,2,0,"span",46),t.k0s()),2&a){const e=m.$implicit,n=m.last;t.R7$(),t.SpI(" ",e),t.R7$(),t.Y8G("ngIf",!n)}}function U(a,m){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.DNE(14,w,3,2,"span",61),t.k0s(),t.j41(15,"td",60)(16,"button",63),t.bIt("click",function(){const o=s.eBV(e).$implicit,i=t.XpG(2);return s.Njj(i.openAnnotationModal(o))}),t.nrm(17,"i",64),t.k0s()()()}if(2&a){const e=m.$implicit;t.R7$(2),t.JRh(e.code),t.R7$(2),t.JRh(e.codRef),t.R7$(2),t.JRh(e.referencia),t.R7$(2),t.JRh(e.producto),t.R7$(2),t.JRh(e.area),t.R7$(2),t.JRh(e.team||"Sin equipo"),t.R7$(2),t.Y8G("ngForOf",e.persons)}}function V(a,m){1&a&&(t.j41(0,"tr")(1,"td",91),t.EFF(2,"No hay registros no conformes para la fecha seleccionada"),t.k0s()())}function X(a,m){if(1&a){const e=t.RV6();t.j41(0,"div",92)(1,"button",93),t.bIt("click",function(){s.eBV(e);const o=t.XpG(2);return s.Njj(o.changeNotCompliantPage(o.notCompliantCurrentPage-1))}),t.EFF(2," Anterior "),t.k0s(),t.j41(3,"button",94),t.EFF(4),t.k0s(),t.j41(5,"button",93),t.bIt("click",function(){s.eBV(e);const o=t.XpG(2);return s.Njj(o.changeNotCompliantPage(o.notCompliantCurrentPage+1))}),t.EFF(6," Siguiente "),t.k0s()()}if(2&a){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.notCompliantCurrentPage<=1),t.R7$(3),t.Lme(" P\xe1gina ",e.notCompliantCurrentPage," de ",e.notCompliantTotalPages," "),t.R7$(),t.Y8G("disabled",e.notCompliantCurrentPage>=e.notCompliantTotalPages)}}function Y(a,m){if(1&a){const e=t.RV6();t.j41(0,"div")(1,"div",48)(2,"div",49)(3,"input",50),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterTextNotCompliant,o)||(i.filterTextNotCompliant=o),s.Njj(o)}),t.bIt("ngModelChange",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyNotCompliantFilters())}),t.k0s()(),t.j41(4,"div",49)(5,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterAreaNotCompliant,o)||(i.filterAreaNotCompliant=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyNotCompliantFilters())}),t.j41(6,"option",52),t.EFF(7,"Todas las \xc1reas"),t.k0s(),t.DNE(8,$,2,2,"option",53),t.k0s()(),t.j41(9,"div",49)(10,"select",51),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.filterTeamNotCompliant,o)||(i.filterTeamNotCompliant=o),s.Njj(o)}),t.bIt("change",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.applyNotCompliantFilters())}),t.j41(11,"option",52),t.EFF(12,"Todos los Equipos"),t.k0s(),t.DNE(13,P,2,2,"option",53),t.k0s()(),t.j41(14,"div",54)(15,"button",55),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.resetNotCompliantFilters())}),t.EFF(16,"Reset"),t.k0s(),t.j41(17,"button",56),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.loadNotCompliantData(o.formatDateForBackend(o.selectedDate)))}),t.EFF(18,"Refrescar"),t.k0s()()(),t.j41(19,"div",57)(20,"table",58)(21,"thead",59)(22,"tr")(23,"th"),t.EFF(24,"C\xf3digo"),t.k0s(),t.j41(25,"th"),t.EFF(26,"CodRef"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Referencia"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Producto"),t.k0s(),t.j41(31,"th"),t.EFF(32,"\xc1rea"),t.k0s(),t.j41(33,"th"),t.EFF(34,"Equipo"),t.k0s(),t.j41(35,"th"),t.EFF(36,"Personas"),t.k0s(),t.j41(37,"th",60),t.EFF(38,"Anotaciones"),t.k0s()()(),t.j41(39,"tbody"),t.DNE(40,U,18,7,"tr",61)(41,V,3,0,"tr",46),t.k0s()()(),t.j41(42,"div",88)(43,"div",89),t.EFF(44),t.k0s(),t.DNE(45,X,7,4,"div",90),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.filterTextNotCompliant),t.R7$(2),t.R50("ngModel",e.filterAreaNotCompliant),t.R7$(3),t.Y8G("ngForOf",e.areaOptions),t.R7$(2),t.R50("ngModel",e.filterTeamNotCompliant),t.R7$(3),t.Y8G("ngForOf",e.teamOptions),t.R7$(27),t.Y8G("ngForOf",e.filteredNotCompliantItems),t.R7$(),t.Y8G("ngIf",0===e.filteredNotCompliantItems.length),t.R7$(3),t.Lme(" Mostrando ",e.filteredNotCompliantItems.length," de ",e.notCompliantTotal," registros no conformes "),t.R7$(),t.Y8G("ngIf",e.notCompliantTotalPages>1)}}function W(a,m){if(1&a){const e=t.RV6();t.j41(0,"div",95)(1,"div",96)(2,"div",41)(3,"div",97)(4,"strong"),t.EFF(5,"Anotaci\xf3n - C\xf3digo:"),t.k0s(),t.j41(6,"small",98),t.EFF(7),t.k0s(),t.j41(8,"button",99),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.closeAnnotationModal())}),t.k0s()(),t.j41(9,"div",3)(10,"p",100)(11,"small",89),t.EFF(12),t.k0s()(),t.j41(13,"div",101)(14,"label",102),t.EFF(15,"Anotaci\xf3n"),t.k0s(),t.j41(16,"textarea",103),t.mxI("ngModelChange",function(o){s.eBV(e);const i=t.XpG();return t.DH7(i.annotationText,o)||(i.annotationText=o),s.Njj(o)}),t.k0s()(),t.j41(17,"div",104)(18,"button",105),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.closeAnnotationModal())}),t.EFF(19,"Cancelar"),t.k0s(),t.j41(20,"button",106),t.bIt("click",function(){s.eBV(e);const o=t.XpG();return s.Njj(o.saveAnnotation())}),t.EFF(21,"Guardar"),t.k0s()()()()()()}if(2&a){const e=t.XpG();t.R7$(7),t.JRh(null==e.annotationItem?null:e.annotationItem.code),t.R7$(5),t.Lme("Referencia: ",null==e.annotationItem?null:e.annotationItem.referencia," \u2014 \xc1rea: ",null==e.annotationItem?null:e.annotationItem.area),t.R7$(4),t.R50("ngModel",e.annotationText)}}(0,C.EO)(E.A,"es");let J=(()=>{class a{constructor(){this.dashboardService=(0,s.WQX)(_.B),this.selectedDate=this.formatDate(new Date),this.storageGroupsData=[],this.confirmedCountData=[],this.duplicatesData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0,this.duplicadosCount=0,this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0,this.configuracionesCount=0,this.bloqueosCount=0,this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0,this.teamCount=0,this.areaCount=0,this.notCompliantTotal=0,this.notCompliantTotalPages=0,this.notCompliantCurrentPage=1,this.notCompliantPageSize=20,this.notCompliantItems=[],this.notCompliantLoading=!1,this.notCompliantError="",this.filteredNotCompliantItems=[],this.filterTextNotCompliant="",this.filterAreaNotCompliant="",this.filterTeamNotCompliant="",this.showAnnotationModal=!1,this.annotationItem=null,this.annotationText="",this.panel="global",this.globalSearch="",this.filterText="",this.filterArea="",this.filterTeam="",this.areaOptions=[],this.teamOptions=[],this.loading=!1,this.errorMessage="",this.inventoryList=[],this.filteredInventory=[],this.p=1,this.itemsPerPage=10,this.selectedTeamLeft="",this.selectedTeamRight="",this.teamLeft=null,this.teamRight=null,this.comparisonResult=null,this.comparisonDetails=null,this.loadAllData(this.formatDateForBackend(this.selectedDate))}formatDate(e){const n=new Date(e);let o=""+(n.getMonth()+1),i=""+n.getDate();const r=n.getFullYear();return o.length<2&&(o="0"+o),i.length<2&&(i="0"+i),[r,o,i].join("-")}formatDateForBackend(e){const n="string"==typeof e?new Date(e.replace(/-/g,"/")):e;let o=""+n.getDate(),i=""+(n.getMonth()+1);const r=n.getFullYear();return i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),[o,i,r].join("/")}onDateChange(e){const n=this.formatDateForBackend(e);this.loadAllData(n)}loadAllData(e){this.loading=!0,this.errorMessage="",this.resetCounts(),this.dashboardService.getViewInventories(e).subscribe({next:n=>{if(n&&!1===n.ok)return this.errorMessage=String(n.msg),void(this.loading=!1);if(n?.ok&&n.msg){this.inventoryList=n.msg.items.map(i=>{const r=Array.isArray(i.persons)?i.persons.filter(Boolean):[],p=`${i.area||""}||${r.join("|")}`;return{...i,teamKey:p,teamLabel:r.length?r.join(", "):i.team||i.area||""}}),this.filteredInventory=[...this.inventoryList],this.areaOptions=Array.from(new Set(this.inventoryList.map(i=>i.area).filter(Boolean))).sort();const o=new Map;this.inventoryList.forEach(i=>{const r=Array.isArray(i.persons)?i.persons.filter(Boolean):[],p=`${i.area||""}||${r.join("|")}`;if(!o.has(p)){const h=r.length?`${r.join(", ")}`:i.team||i.area||"Equipo";o.set(p,{label:h,area:i.area})}}),this.teamOptions=Array.from(o.entries()).map(([i,r])=>({key:i,label:r.label,area:r.area}))}else this.inventoryList=[],this.filteredInventory=[],this.areaOptions=[],this.teamOptions=[]},error:n=>{console.error("Error viewInventories:",n),this.errorMessage=n.message,this.loading=!1,this.inventoryList=[],this.filteredInventory=[],this.areaOptions=[],this.teamOptions=[]}}),this.dashboardService.getStorageGroups(e).subscribe({next:n=>{n&&n.ok&&n.msg?(this.storageGroupsData=Array.isArray(n.msg.data)?n.msg.data:[],this.productosLeidosCount=Number(n.msg.totalRecords??this.storageGroupsData.length??0),this.equiposRegistradosCount=Number(n.msg.totalGroups??0)):(this.storageGroupsData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0)},error:n=>{console.error("Error getStorageGroups:",n),this.errorMessage=n?.message||"Error cargando grupos de almacenamiento",this.storageGroupsData=[],this.productosLeidosCount=0,this.equiposRegistradosCount=0}}),this.dashboardService.getConfirmedCount(e).subscribe({next:n=>{n&&n.ok&&Array.isArray(n.msg)?(this.confirmedCountData=n.msg,this.productosOkCount=this.confirmedCountData.reduce((o,i)=>o+(Number(i.validatedTrue??0)||0),0),this.noConformesCount=this.confirmedCountData.reduce((o,i)=>o+(Number(i.validatedFalse??0)||0),0),this.revisionesCount=this.confirmedCountData.length):(this.confirmedCountData=[],this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0)},error:n=>{console.error("Error getConfirmedCount:",n),this.errorMessage=n?.message||"Error cargando conteo confirmado",this.confirmedCountData=[],this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0}}),this.dashboardService.getDuplicates(e).subscribe({next:n=>{n&&n.ok&&n.msg&&Array.isArray(n.msg.data)?(this.duplicatesData=n.msg.data,this.duplicadosCount=this.duplicatesData.length):(this.duplicatesData=[],this.duplicadosCount=0)},error:n=>{console.error("Error getDuplicates:",n),this.errorMessage=n?.message||"Error cargando duplicados",this.duplicatesData=[],this.duplicadosCount=0}}),this.dashboardService.getCountGlobal(e).subscribe({next:n=>{n&&n.ok&&n.msg?(this.globalCount=Number(n.msg.total??0),this.validatedTrueCount=Number(n.msg.validatedTrue??0),this.validatedFalseCount=Number(n.msg.validatedFalse??0)):(this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0)},error:n=>{console.error("Error getCountGlobal:",n),this.errorMessage=n?.message||"Error cargando conteo global",this.globalCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0}}),this.dashboardService.getTeamCount(e).subscribe({next:n=>{this.teamCount=n&&n.ok&&n.msg?Number(n.msg.totalTeams??0):0},error:n=>{console.error("Error getTeamCount:",n),this.errorMessage=n?.message||"Error cargando conteo de equipos",this.teamCount=0}}),this.dashboardService.getAreaCount(e).subscribe({next:n=>{this.areaCount=n&&n.ok&&n.msg?Number(n.msg.totalAreas??0):0},error:n=>{console.error("Error getAreaCount:",n),this.errorMessage=n?.message||"Error cargando conteo de \xe1reas",this.areaCount=0}}),this.dashboardService.getNotCompliant(e,{teamKey:"all"}).subscribe({next:n=>{if(n&&n.ok&&n.msg){this.notCompliantTotal=n.msg.total??0,this.notCompliantTotalPages=n.msg.totalPages??0,this.notCompliantCurrentPage=n.msg.currentPage??1,this.notCompliantItems=Array.isArray(n.msg.items)?n.msg.items:[],this.applyNotCompliantFilters();const o=this.notCompliantItems.map(i=>i.area).filter(Boolean);this.areaOptions=Array.from(new Set([...this.areaOptions,...o])).sort(),this.filteredNotCompliantItems=[...this.filteredNotCompliantItems]}else this.resetNotCompliantData()},error:n=>{console.error("Error getNotCompliant:",n),this.errorMessage=n?.message||"Error cargando items no conformes",this.resetNotCompliantData()}}),setTimeout(()=>this.loading=!1,400)}applyGlobalFilters(){const e=(this.filterText||"").toLowerCase();this.filteredInventory=this.inventoryList.filter(n=>{const o=!e||String(n.code||"").toLowerCase().includes(e)||String(n.referencia||"").toLowerCase().includes(e)||String(n.producto||"").toLowerCase().includes(e)||String(n.codRef||"").toLowerCase().includes(e),i=!this.filterArea||n.area===this.filterArea,r=!this.filterTeam||this.computeTeamKey(n)===this.filterTeam;return o&&i&&r})}onGlobalFilterChange(){this.applyGlobalFilters()}resetGlobalFilters(){this.filterText="",this.filterArea="",this.filterTeam="",this.filteredInventory=[...this.inventoryList]}computeTeamKey(e){const n=Array.isArray(e.persons)?e.persons.filter(Boolean):[];return`${e.area||""}||${n.join("|")}`}onSelectTeam(e){const n="left"===e?this.selectedTeamLeft:this.selectedTeamRight;if(!n)return"left"===e?this.teamLeft=null:this.teamRight=null,void(this.comparisonDetails=null);const o=this.inventoryList.filter(r=>this.computeTeamKey(r)===n),i={area:o.length>0?o[0].area:"",total:o.length,items:o};"left"===e?this.teamLeft={...i,codes:o.map(r=>r.code)}:this.teamRight={...i,codes:o.map(r=>r.code)},this.comparisonResult=null,this.comparisonDetails=null}clearTeam(e){"left"===e?(this.selectedTeamLeft="",this.teamLeft=null):(this.selectedTeamRight="",this.teamRight=null),this.comparisonResult=null}compareTeams(){if(!this.teamLeft||!this.teamRight)return void(this.comparisonResult=null);const e=this.teamLeft.items,n=this.teamRight.items,o=new Set(this.teamLeft.codes),i=new Set(this.teamRight.codes),r=e.filter(f=>!i.has(f.code)),p=n.filter(f=>!o.has(f.code)),h=e.filter(f=>i.has(f.code));this.comparisonDetails={leftMissing:r,rightMissing:p,matches:h},this.comparisonResult={matchCount:h.length,diffCount:r.length+p.length}}exportComparison(){if(!this.teamLeft||!this.teamRight)return;const e=this.teamLeft.codes.reduce((g,T)=>(g[T]=(g[T]||0)+1,g),{}),n=this.teamRight.codes.reduce((g,T)=>(g[T]=(g[T]||0)+1,g),{}),r=["code,leftCount,rightCount",...Array.from(new Set([...Object.keys(e),...Object.keys(n)])).map(g=>`${g},${e[g]||0},${n[g]||0}`)].join("\n"),p=new Blob([r],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(p),f=document.createElement("a");f.href=h,f.download=`comparison_${Date.now()}.csv`,f.click(),URL.revokeObjectURL(h)}resetCounts(){this.productosLeidosCount=0,this.equiposRegistradosCount=0,this.duplicadosCount=0,this.productosOkCount=0,this.noConformesCount=0,this.revisionesCount=0,this.validatedTrueCount=0,this.validatedFalseCount=0,this.globalCount=0,this.teamCount=0,this.areaCount=0}openAnnotationModal(e){this.annotationItem=e,this.annotationText=e?.annotation??e?.note??"",this.showAnnotationModal=!0}closeAnnotationModal(){this.showAnnotationModal=!1,this.annotationItem=null,this.annotationText=""}saveAnnotation(){if(!this.annotationItem)return;const e=(this.annotationText||"").trim();e!==(this.annotationItem.annotation??this.annotationItem.note??"")?this.sendAuditNoteForItem({code:this.annotationItem.code,referencia:this.annotationItem.referencia,area:this.annotationItem.area},e):this.closeAnnotationModal()}isSimpleResponse(e){return!!e&&"string"==typeof e.msg}isWithItemResponse(e){return!!e&&e.msg&&"object"==typeof e.msg&&("code"in e.msg||"_id"in e.msg)}sendAuditNoteForItem(e,n){const o=this.formatDateForBackend(this.selectedDate),i={barcode:e.code,reference:e.referencia,area:e.area,note:n,date:o};this.notCompliantLoading=!0,this.dashboardService.getAuditNote(i).subscribe({next:r=>{if(!r||!r.ok)return console.warn("Respuesta no OK del backend:",r),void(this.notCompliantLoading=!1);const p=this.notCompliantItems.find(h=>String(h.code)===String(i.barcode));if(this.isSimpleResponse(r))p&&(p.annotation=i.note??p.annotation),console.log(r.msg);else if(this.isWithItemResponse(r)){const h=r.msg;console.log("Respuesta con item actualizado:",h),p?(p.annotation=h.annotation??h.note??i.note??p.annotation,p.area=h.area??p.area,p.referencia=h.referencia??p.referencia,p.producto=h.producto??p.producto,p.validate="boolean"==typeof h.validate?h.validate:p.validate,p.codRef="number"==typeof h.codRef?h.codRef:p.codRef,p.persons=Array.isArray(h.persons)?h.persons:p.persons,p.team=h.team??p.team):this.notCompliantItems.push({_id:h._id,area:h.area,persons:h.persons||[],team:h.team||"",code:h.code,codRef:h.codRef,referencia:h.referencia,producto:h.producto,validate:h.validate,annotation:h.annotation??h.note}),console.log("Item actualizado:",h)}else p&&(p.annotation=i.note??p.annotation),console.warn("Respuesta con formato inesperado:",r);this.applyNotCompliantFilters(),this.closeAnnotationModal(),this.notCompliantLoading=!1},error:r=>{console.error("Error al guardar anotaci\xf3n:",r),this.notCompliantLoading=!1}})}loadNotCompliantData(e,n=1,o=20){this.dashboardService.getNotCompliant(e,{teamKey:"all",page:n,limit:o}).subscribe({next:r=>{r&&r.ok&&r.msg?(this.notCompliantTotal=r.msg.total??0,this.notCompliantTotalPages=r.msg.totalPages??0,this.notCompliantCurrentPage=r.msg.currentPage??n,this.notCompliantItems=r.msg.items??[],this.applyNotCompliantFilters()):this.resetNotCompliantData()},error:r=>{console.error("Error getNotCompliant:",r),this.errorMessage=r?.message||"Error cargando items no conformes",this.resetNotCompliantData()}})}resetNotCompliantData(){this.notCompliantTotal=0,this.notCompliantTotalPages=0,this.notCompliantCurrentPage=1,this.notCompliantItems=[],this.filteredNotCompliantItems=[]}applyNotCompliantFilters(){const e=(this.filterTextNotCompliant||"").trim().toLowerCase();this.filteredNotCompliantItems=this.notCompliantItems.filter(n=>(!e||(n.code||"").toLowerCase().includes(e)||(n.referencia||"").toLowerCase().includes(e)||(n.producto||"").toLowerCase().includes(e))&&(!this.filterAreaNotCompliant||n.area===this.filterAreaNotCompliant)&&(!this.filterTeamNotCompliant||n.team===this.filterTeamNotCompliant))}resetNotCompliantFilters(){this.filterTextNotCompliant="",this.filterAreaNotCompliant="",this.filterTeamNotCompliant="",this.applyNotCompliantFilters()}changeNotCompliantPage(e){if(!e||e<1||this.notCompliantTotalPages&&e>this.notCompliantTotalPages)return;const n=this.formatDateForBackend(this.selectedDate);this.loadNotCompliantData(n,e,this.notCompliantPageSize)}handleError(e){console.error("DashInventoryServices: Error en la petici\xf3n:",e);let n="Ocurri\xf3 un error inesperado.";return e.error?n=e.error.msg||e.error.message||n:e.message&&(n=e.message),(0,b.$)(()=>new Error(n))}clearErrorMessage(){this.errorMessage=""}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-dash-inventories"]],features:[t.Jv_([{provide:t.xe9,useValue:"es"}])],decls:123,vars:23,consts:[[1,"row"],[1,"col-12","mb-4"],[1,"card","bg-primary-subtle","text-dark","overflow-hidden"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-1"],[1,"text-muted","mb-0","opacity-75","text-sm"],[1,"col-12","col-md-3"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"row","mb-4"],[1,"col-md-3","mb-3"],[1,"card","total-income-card","overflow-hidden","bg-primary","text-white"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","icon","m-r-5"],[1,"text-white","ti","ti-layout-board-split","f-24"],[1,"ms-2"],[1,"text-white","f-w-600","mb-1"],[1,"mb-0","opacity-50","text-sm"],[1,"card","total-income-card","warning","overflow-hidden"],[1,"avatar","avatar-lg","icon-warning","m-r-5"],[1,"text-warning","ti","ti-layout-board-split","f-24"],[1,"f-w-600","mb-1"],[1,"card","total-income-card","danger","overflow-hidden","bg-danger","text-white"],[1,"avatar","avatar-lg","icon-danger","m-r-5"],[1,"text-white","ti","ti-alert-circle","f-24"],[1,"card","total-income-card","success","overflow-hidden","bg-success","text-white"],[1,"avatar","avatar-lg","icon-success","m-r-5"],[1,"text-white","ti","ti-check","f-24"],[1,"card","total-income-card","info","overflow-hidden","bg-info","text-white"],[1,"avatar","avatar-lg","icon-info","m-r-5"],[1,"text-white","ti","ti-info-circle","f-24"],[1,"card","total-income-card","warning","overflow-hidden","bg-warning","text-dark"],[1,"text-dark","ti","ti-exclamation","f-24"],[1,"card","total-income-card","secondary","overflow-hidden","bg-secondary","text-white"],[1,"avatar","avatar-lg","icon-secondary","m-r-5"],[1,"text-white","ti","ti-settings","f-24"],[1,"card","total-income-card","dark","overflow-hidden","bg-dark","text-white"],[1,"avatar","avatar-lg","icon-dark","m-r-5"],[1,"text-white","ti","ti-lock","f-24"],[1,"row","mt-4"],[1,"col-12"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"list-group","list-group-horizontal","mb-0"],[1,"list-group-item",3,"click"],["type","text","placeholder","Buscar r\xe1pido (c\xf3digo, ref, producto)",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","annotation-modal-backdrop",4,"ngIf"],[1,"row","mb-3","g-2"],[1,"col-md-3"],["type","text","placeholder","Buscar c\xf3digo / referencia / producto",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","d-flex"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-sm","table-hover"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"value"],["title","Agregar / ver anotaci\xf3n",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"ti","ti-note"],["colspan","6",1,"text-center","text-muted"],[1,"row","mb-3"],[1,"col-md-6"],[1,"mb-2","d-flex","align-items-center","gap-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"d-flex","gap-2","mb-4"],[1,"btn","btn-primary",3,"click","disabled"],[1,"ti","ti-arrows-diff","me-1"],["class","btn btn-outline-success",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"btn","btn-outline-success",3,"click"],[1,"ti","ti-download","me-1"],[1,"card","border-danger"],[1,"card-header","bg-danger","text-white","d-flex","justify-content-between"],[1,"badge","bg-white","text-danger"],[1,"table-responsive",2,"max-height","400px"],[1,"table","table-sm","table-hover","mb-0"],[1,"card","border-warning"],[1,"card-header","bg-warning","text-dark","d-flex","justify-content-between"],[1,"badge","bg-dark","text-white"],[1,"text-danger"],["colspan","2",1,"text-center","text-success"],[1,"text-warning"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"text-muted"],["class","btn-group","role","group",4,"ngIf"],["colspan","8",1,"text-center","text-muted"],["role","group",1,"btn-group"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-primary","btn-sm","disabled"],[1,"annotation-modal-backdrop"],[1,"annotation-modal","dialog-card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"text-muted","ms-2"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"mb-2"],[1,"mb-3"],[1,"form-label"],["rows","6","placeholder","Escribe tu nota aqu\xed...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","gap-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h4",5),t.EFF(7,"Consultar Inventario \u{1f4e6} por Fecha \u{1f4c5}"),t.k0s(),t.j41(8,"p",6),t.EFF(9," Fecha Seleccionada: "),t.j41(10,"strong"),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"div",7)(14,"input",8),t.mxI("ngModelChange",function(r){return t.DH7(o.selectedDate,r)||(o.selectedDate=r),r}),t.bIt("change",function(){return o.onDateChange(o.selectedDate)}),t.k0s()()()()()()(),t.j41(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",3)(19,"div",12)(20,"div",13),t.nrm(21,"i",14),t.k0s(),t.j41(22,"div",15)(23,"h4",16),t.EFF(24),t.k0s(),t.j41(25,"p",17),t.EFF(26,"Total Productos Leidos"),t.k0s()()()()()(),t.j41(27,"div",10)(28,"div",18)(29,"div",3)(30,"div",12)(31,"div",19),t.nrm(32,"i",20),t.k0s(),t.j41(33,"div",15)(34,"h4",21),t.EFF(35),t.k0s(),t.j41(36,"p",17),t.EFF(37,"Productos Conformes"),t.k0s()()()()()(),t.j41(38,"div",10)(39,"div",22)(40,"div",3)(41,"div",12)(42,"div",23),t.nrm(43,"i",24),t.k0s(),t.j41(44,"div",15)(45,"h4",16),t.EFF(46),t.k0s(),t.j41(47,"p",17),t.EFF(48,"Productos No Conformes"),t.k0s()()()()()(),t.j41(49,"div",10)(50,"div",25)(51,"div",3)(52,"div",12)(53,"div",26),t.nrm(54,"i",27),t.k0s(),t.j41(55,"div",15)(56,"h4",16),t.EFF(57),t.k0s(),t.j41(58,"p",17),t.EFF(59,"Equipos Registrados"),t.k0s()()()()()()(),t.j41(60,"div",0)(61,"div",10)(62,"div",28)(63,"div",3)(64,"div",12)(65,"div",29),t.nrm(66,"i",30),t.k0s(),t.j41(67,"div",15)(68,"h4",16),t.EFF(69),t.k0s(),t.j41(70,"p",17),t.EFF(71,"\xc1reas Registradas"),t.k0s()()()()()(),t.j41(72,"div",10)(73,"div",31)(74,"div",3)(75,"div",12)(76,"div",19),t.nrm(77,"i",32),t.k0s(),t.j41(78,"div",15)(79,"h4",21),t.EFF(80,"0"),t.k0s(),t.j41(81,"p",17),t.EFF(82,"Revisiones Auditoria"),t.k0s()()()()()(),t.j41(83,"div",10)(84,"div",33)(85,"div",3)(86,"div",12)(87,"div",34),t.nrm(88,"i",35),t.k0s(),t.j41(89,"div",15)(90,"h4",16),t.EFF(91,"0"),t.k0s(),t.j41(92,"p",17),t.EFF(93,"Registros de Novedades"),t.k0s()()()()()(),t.j41(94,"div",10)(95,"div",36)(96,"div",3)(97,"div",12)(98,"div",37),t.nrm(99,"i",38),t.k0s(),t.j41(100,"div",15)(101,"h4",16),t.EFF(102,"0"),t.k0s(),t.j41(103,"p",17),t.EFF(104,"??"),t.k0s()()()()()()(),t.j41(105,"div",39)(106,"div",40)(107,"div",41)(108,"div",42)(109,"ul",43)(110,"li",44),t.bIt("click",function(){return o.panel="global"}),t.EFF(111,"Inventario Global"),t.k0s(),t.j41(112,"li",44),t.bIt("click",function(){return o.panel="teams"}),t.EFF(113,"Inventario por Equipos"),t.k0s(),t.j41(114,"li",44),t.bIt("click",function(){return o.panel="notCompliant"}),t.EFF(115,"Inventario No Conformes"),t.k0s()(),t.j41(116,"div",12)(117,"input",45),t.mxI("ngModelChange",function(r){return t.DH7(o.globalSearch,r)||(o.globalSearch=r),r}),t.bIt("ngModelChange",function(){return o.onGlobalFilterChange()}),t.k0s()()(),t.j41(118,"div",3),t.DNE(119,k,38,7,"div",46)(120,B,24,7,"div",46)(121,Y,46,10,"div",46),t.k0s()()()(),t.DNE(122,W,22,4,"div",47)),2&n&&(t.R7$(11),t.JRh(t.ii3(12,18,o.selectedDate,"fullDate","","es")),t.R7$(3),t.R50("ngModel",o.selectedDate),t.R7$(10),t.JRh(o.globalCount||"0"),t.R7$(11),t.JRh(o.validatedTrueCount||"0"),t.R7$(11),t.JRh(o.validatedFalseCount||"0"),t.R7$(11),t.JRh(o.teamCount||"0"),t.R7$(12),t.JRh(o.areaCount||"0"),t.R7$(41),t.AVh("active","global"===o.panel),t.R7$(2),t.AVh("active","teams"===o.panel),t.R7$(2),t.AVh("active","notCompliant"===o.panel),t.R7$(3),t.R50("ngModel",o.globalSearch),t.R7$(2),t.Y8G("ngIf","global"===o.panel),t.R7$(),t.Y8G("ngIf","teams"===o.panel),t.R7$(),t.Y8G("ngIf","notCompliant"===o.panel),t.R7$(),t.Y8G("ngIf",o.showAnnotationModal))},dependencies:[R.G,d.Sq,d.bT,u.xH,u.y7,u.me,u.wz,u.BC,u.vS,d.vh,u.YN],styles:[".annotation-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073;display:flex;align-items:center;justify-content:center;z-index:2000}.annotation-modal.dialog-card[_ngcontent-%COMP%]{width:90%;max-width:720px;padding:0 12px}.annotation-modal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:6px;overflow:hidden}.annotation-modal[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between}"]})}}return a})()}}]);